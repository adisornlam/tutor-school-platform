import{d as K,q as Q,r as m,E as q,c as a,b as e,v as w,x as p,J as j,e as l,g as v,y,L as le,t as f,a as u,l as ne,s as F,H as re,F as D,i as R,K as H,f as J,j as oe,n as de}from"./CX4WDIMJ.js";import{A as ie}from"./BdJkXebB.js";const ae={class:"space-y-4","data-address-form":""},ue={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},pe={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},me={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ce={class:"flex items-center"},ge={key:0,class:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded"},fe=K({__name:"AddressForm",props:{address:{default:null}},emits:["update"],setup(S,{expose:M,emit:c}){const z=S,x=c,d=Q({address_type:"home",recipient_name:"",phone:"",address_line1:"",address_line2:"",subdistrict:"",district:"",province:"",postal_code:"",country:"Thailand",is_default:!1}),g=m("");return q(()=>z.address,s=>{s?Object.assign(d,{address_type:s.address_type||"home",recipient_name:s.recipient_name||"",phone:s.phone||"",address_line1:s.address_line1||"",address_line2:s.address_line2||"",subdistrict:s.subdistrict||"",district:s.district||"",province:s.province||"",postal_code:s.postal_code||"",country:s.country||"Thailand",is_default:s.is_default||!1}):Object.assign(d,{address_type:"home",recipient_name:"",phone:"",address_line1:"",address_line2:"",subdistrict:"",district:"",province:"",postal_code:"",country:"Thailand",is_default:!1}),g.value=""},{immediate:!0}),q(d,s=>{x("update",{...s})},{deep:!0}),M({validate:()=>!d.recipient_name||!d.phone||!d.address_line1||!d.province||!d.postal_code?(g.value="กรุณากรอกข้อมูลที่จำเป็นให้ครบถ้วน",!1):(g.value="",!0),getData:()=>({...d})}),(s,r)=>(u(),a("div",ae,[e("div",ue,[e("div",null,[r[12]||(r[12]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," ประเภทที่อยู่ ",-1)),p(e("select",{"onUpdate:modelValue":r[0]||(r[0]=i=>l(d).address_type=i),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 bg-white text-gray-900"},[...r[11]||(r[11]=[e("option",{value:"home"},"บ้าน",-1),e("option",{value:"work"},"ที่ทำงาน",-1),e("option",{value:"other"},"อื่นๆ",-1)])],512),[[j,l(d).address_type]])]),e("div",null,[r[13]||(r[13]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[v(" ชื่อผู้รับ "),e("span",{class:"text-red-500"},"*")],-1)),p(e("input",{"onUpdate:modelValue":r[1]||(r[1]=i=>l(d).recipient_name=i),type:"text",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 bg-white text-gray-900",placeholder:"ชื่อ-นามสกุล ผู้รับเอกสาร"},null,512),[[y,l(d).recipient_name]])]),e("div",null,[r[14]||(r[14]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[v(" เบอร์โทรศัพท์ "),e("span",{class:"text-red-500"},"*")],-1)),p(e("input",{"onUpdate:modelValue":r[2]||(r[2]=i=>l(d).phone=i),type:"tel",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 bg-white text-gray-900",placeholder:"080-123-4567"},null,512),[[y,l(d).phone]])])]),e("div",null,[r[15]||(r[15]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[v(" ที่อยู่บรรทัดที่ 1 "),e("span",{class:"text-red-500"},"*")],-1)),p(e("input",{"onUpdate:modelValue":r[3]||(r[3]=i=>l(d).address_line1=i),type:"text",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 bg-white text-gray-900",placeholder:"เลขที่ บ้าน อาคาร ถนน"},null,512),[[y,l(d).address_line1]])]),e("div",null,[r[16]||(r[16]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," ที่อยู่บรรทัดที่ 2 ",-1)),p(e("input",{"onUpdate:modelValue":r[4]||(r[4]=i=>l(d).address_line2=i),type:"text",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 bg-white text-gray-900",placeholder:"หมู่ ซอย แขวง/ตำบล (ถ้ามี)"},null,512),[[y,l(d).address_line2]])]),e("div",pe,[e("div",null,[r[17]||(r[17]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," แขวง/ตำบล ",-1)),p(e("input",{"onUpdate:modelValue":r[5]||(r[5]=i=>l(d).subdistrict=i),type:"text",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 bg-white text-gray-900"},null,512),[[y,l(d).subdistrict]])]),e("div",null,[r[18]||(r[18]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," เขต/อำเภอ ",-1)),p(e("input",{"onUpdate:modelValue":r[6]||(r[6]=i=>l(d).district=i),type:"text",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 bg-white text-gray-900"},null,512),[[y,l(d).district]])]),e("div",null,[r[19]||(r[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[v(" จังหวัด "),e("span",{class:"text-red-500"},"*")],-1)),p(e("input",{"onUpdate:modelValue":r[7]||(r[7]=i=>l(d).province=i),type:"text",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 bg-white text-gray-900"},null,512),[[y,l(d).province]])])]),e("div",me,[e("div",null,[r[20]||(r[20]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[v(" รหัสไปรษณีย์ "),e("span",{class:"text-red-500"},"*")],-1)),p(e("input",{"onUpdate:modelValue":r[8]||(r[8]=i=>l(d).postal_code=i),type:"text",required:"",maxlength:"5",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 bg-white text-gray-900",placeholder:"10110"},null,512),[[y,l(d).postal_code]])]),e("div",null,[r[21]||(r[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," ประเทศ ",-1)),p(e("input",{"onUpdate:modelValue":r[9]||(r[9]=i=>l(d).country=i),type:"text",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 bg-white text-gray-900",placeholder:"Thailand"},null,512),[[y,l(d).country]])])]),e("div",ce,[p(e("input",{"onUpdate:modelValue":r[10]||(r[10]=i=>l(d).is_default=i),type:"checkbox",id:"is_default",class:"w-4 h-4 text-green-600 border-gray-300 rounded focus:ring-green-500"},null,512),[[le,l(d).is_default]]),r[22]||(r[22]=e("label",{for:"is_default",class:"ml-2 text-sm text-gray-700"}," ตั้งเป็นที่อยู่หลัก ",-1))]),l(g)?(u(),a("div",ge,f(l(g)),1)):w("",!0)]))}}),ye=Object.assign(fe,{__name:"AddressForm"}),be={class:"bg-white rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto"},ve={class:"flex items-center justify-between mb-6"},xe={class:"text-2xl font-bold"},_e={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},he={key:0},we={class:"relative"},ke={key:0,class:"absolute right-10 top-1/2 transform -translate-y-1/2 text-green-600"},$e={key:1,class:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto"},Se={key:0,class:"px-4 py-2 text-sm text-gray-500"},Be={key:1,class:"px-4 py-2 text-sm text-gray-500"},Ve={key:2,class:"divide-y divide-gray-200"},Ce=["onClick"],Ue={class:"font-medium text-gray-900"},Ae={class:"text-sm text-gray-500"},Te={key:0,class:"text-xs text-gray-400"},Ee={key:1,class:"md:col-span-2"},je={class:"px-4 py-2 bg-gray-50 border border-gray-300 rounded-lg"},qe={class:"font-medium text-gray-900"},Me={class:"text-sm text-gray-500"},ze=["value"],Oe={class:"md:col-span-2"},Ie={class:"flex gap-6"},Fe={class:"flex items-center cursor-pointer"},De={class:"flex items-center cursor-pointer"},Re={key:2},Ne=["required","disabled"],Le={value:""},Pe=["value"],He={key:3},Je={key:4,class:"text-sm text-gray-500"},Ke={key:0,class:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded"},Qe={class:"bg-white rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto"},Ge={class:"flex items-center justify-between mb-4"},We={class:"flex justify-end space-x-3 mt-4 pt-4 border-t"},Xe=["disabled"],Ye={class:"flex justify-end space-x-3 pt-4"},Ze=["disabled"],et={key:0},tt={key:1},st=K({__name:"EnrollmentModal",props:{show:{type:Boolean},enrollment:{default:null},prefillCourseId:{default:void 0},prefillEnrollmentType:{default:void 0}},emits:["close","saved"],setup(S,{emit:M}){const c=S,z=M,x=oe(),{accessToken:d,user:g}=ne(),s=Q({student_id:0,course_id:0,branch_id:0,enrollment_type:"onsite",shipping_address_id:null,enrollment_date:"",status:"pending"}),r=m(!1),i=m(!1),O=m(!1),_=m("");m([]);const k=m([]),N=m([]),C=m([]),b=m(""),U=m(!1),h=m(null),$=m(!1),A=m(null),T=m(null),B=m(!1);let I=null;const G=()=>{I&&clearTimeout(I),I=setTimeout(()=>{W()},300)},W=async()=>{if(!b.value.trim()){k.value=[];return}O.value=!0;try{const n=await $fetch(`${x.public.apiBase}/admin/users`,{headers:{Authorization:`Bearer ${d.value}`},params:{role:"student",search:b.value,limit:20}});n.success&&(k.value=n.data)}catch(n){console.error("Error searching students:",n),k.value=[]}finally{O.value=!1}},X=n=>{s.student_id=n.id,h.value=n,b.value=`${n.first_name} ${n.last_name} (@${n.username})`,U.value=!1},Y=()=>{setTimeout(()=>{U.value=!1},200)},Z=async()=>{try{const n=await $fetch(`${x.public.apiBase}/admin/courses`,{headers:{Authorization:`Bearer ${d.value}`},params:{status:"published"}});n.success&&(N.value=n.data)}catch(n){console.error("Error loading courses:",n)}},V=async()=>{if(!s.course_id){C.value=[],s.branch_id=0;return}i.value=!0;try{const n=await $fetch(`${x.public.apiBase}/admin/courses/${s.course_id}`,{headers:{Authorization:`Bearer ${d.value}`}});n.success&&n.data.branches&&(C.value=n.data.branches.map(t=>({id:t.branch_id,name:t.branch_name,code:t.branch_code})))}catch(n){console.error("Error loading branches:",n),_.value="ไม่สามารถโหลดข้อมูลสาขาได้"}finally{i.value=!1}};q(()=>c.enrollment,n=>{n?(s.student_id=n.student_id,s.course_id=n.course_id,s.branch_id=n.branch_id||0,s.enrollment_type=n.enrollment_type||"onsite",s.shipping_address_id=n.shipping_address_id||null,s.status=n.status,s.enrollment_date=n.enrollment_date?new Date(n.enrollment_date).toISOString().slice(0,16):new Date().toISOString().slice(0,16),n.student_id&&L(n.student_id),V()):(s.student_id=0,s.course_id=c.prefillCourseId||0,s.branch_id=0,s.enrollment_type=c.prefillEnrollmentType||"onsite",s.shipping_address_id=null,s.status="pending",s.enrollment_date=new Date().toISOString().slice(0,16),C.value=[],h.value=null,b.value="",c.prefillCourseId&&V())},{immediate:!0});const L=async n=>{try{const t=await $fetch(`${x.public.apiBase}/admin/users`,{headers:{Authorization:`Bearer ${d.value}`},params:{role:"student"}});if(t.success){const o=t.data.find(P=>P.id===n);o&&(h.value=o,b.value=`${o.first_name} ${o.last_name} (@${o.username})`)}}catch(t){console.error("Error fetching student info:",t)}},ee=async()=>{if(!g.value||!g.value.roles){B.value=!1;return}if(g.value.roles.includes("student")){B.value=!0,s.student_id=g.value.id;try{const n=await $fetch(`${x.public.apiBase}/admin/users`,{headers:{Authorization:`Bearer ${d.value}`},params:{role:"student",search:g.value.username||g.value.email}});if(n.success&&n.data.length>0){const t=n.data.find(o=>o.id===g.value.id)||n.data[0];h.value=t,b.value=`${t.first_name} ${t.last_name} (@${t.username})`}}catch(n){console.error("Error fetching student info:",n)}}else B.value=!1};q(()=>c.show,async n=>{n&&(await ee(),Z(),c.enrollment?(V(),c.enrollment.student_id&&L(c.enrollment.student_id)):(B.value||(b.value="",h.value=null,k.value=[]),c.prefillCourseId&&(s.course_id=c.prefillCourseId,V()),c.prefillEnrollmentType&&(s.enrollment_type=c.prefillEnrollmentType)))},{immediate:!0});const E=m(null),te=async()=>{if(!s.student_id||!A.value){_.value="กรุณากรอกข้อมูลที่อยู่ให้ครบถ้วน";return}if(!(E.value&&E.value.validate&&!E.value.validate())){r.value=!0,_.value="";try{const n=await $fetch(`${x.public.apiBase}/admin/users/${s.student_id}/addresses`,{method:"POST",headers:{Authorization:`Bearer ${d.value}`},body:A.value});n.success&&(s.shipping_address_id=n.data.id,$.value=!1,A.value=null,T.value&&T.value.reloadAddresses&&await T.value.reloadAddresses())}catch(n){console.error("Error saving address:",n),_.value=n.data?.message||"เกิดข้อผิดพลาดในการบันทึกที่อยู่"}finally{r.value=!1}}},se=async()=>{if(s.enrollment_type==="onsite"&&!s.branch_id){_.value="กรุณาเลือกสาขาสำหรับเรียนสด";return}if(s.enrollment_type==="online"&&!s.shipping_address_id){_.value="กรุณาเลือกที่อยู่จัดส่งสำหรับเรียนออนไลน์";return}r.value=!0,_.value="";try{const n={student_id:s.student_id,course_id:s.course_id,enrollment_type:s.enrollment_type,status:s.status,enrollment_date:s.enrollment_date||new Date().toISOString()};s.enrollment_type==="onsite"?n.branch_id=s.branch_id:n.shipping_address_id=s.shipping_address_id,c.enrollment?await $fetch(`${x.public.apiBase}/admin/enrollments/${c.enrollment.id}`,{method:"PUT",headers:{Authorization:`Bearer ${d.value}`},body:n}):await $fetch(`${x.public.apiBase}/admin/enrollments`,{method:"POST",headers:{Authorization:`Bearer ${d.value}`},body:n}),z("saved")}catch(n){console.error("Error saving enrollment:",n),_.value=n.data?.message||"เกิดข้อผิดพลาดในการบันทึกข้อมูล"}finally{r.value=!1}};return(n,t)=>S.show?(u(),a("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:t[18]||(t[18]=F(o=>n.$emit("close"),["self"]))},[e("div",be,[e("div",ve,[e("h2",xe,f(S.enrollment?"แก้ไขการลงทะเบียน":"ลงทะเบียนใหม่"),1),e("button",{onClick:t[0]||(t[0]=o=>n.$emit("close")),class:"text-gray-400 hover:text-gray-600"},[...t[19]||(t[19]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("form",{onSubmit:F(se,["prevent"]),class:"space-y-4"},[e("div",_e,[l(B)?(u(),a("div",Ee,[t[22]||(t[22]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," นักเรียน ",-1)),e("div",je,[e("p",qe,f(l(h)?.first_name)+" "+f(l(h)?.last_name),1),e("p",Me,"@"+f(l(h)?.username),1)]),p(e("input",{"onUpdate:modelValue":t[4]||(t[4]=o=>l(s).student_id=o),type:"hidden",required:""},null,512),[[y,l(s).student_id,void 0,{number:!0}]])])):(u(),a("div",he,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[v(" นักเรียน "),e("span",{class:"text-red-500"},"*")],-1)),e("div",we,[p(e("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>re(b)?b.value=o:null),type:"text",placeholder:"ค้นหานักเรียน (ชื่อ, username, อีเมล)...",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 bg-white text-gray-900",onInput:G,onFocus:t[2]||(t[2]=o=>U.value=!0),onBlur:Y},null,544),[[y,l(b)]]),l(h)?(u(),a("div",ke,[...t[20]||(t[20]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)])])):w("",!0),l(U)&&(l(k).length>0||l(b))?(u(),a("div",$e,[l(O)?(u(),a("div",Se," กำลังค้นหา... ")):l(k).length===0&&l(b)?(u(),a("div",Be," ไม่พบนักเรียน ")):(u(),a("div",Ve,[(u(!0),a(D,null,R(l(k),o=>(u(),a("button",{key:o.id,type:"button",onClick:P=>X(o),class:de(["w-full text-left px-4 py-2 hover:bg-green-50 focus:bg-green-50 focus:outline-none",{"bg-green-100":l(s).student_id===o.id}])},[e("div",Ue,f(o.first_name)+" "+f(o.last_name),1),e("div",Ae,"@"+f(o.username),1),o.email?(u(),a("div",Te,f(o.email),1)):w("",!0)],10,Ce))),128))]))])):w("",!0)]),p(e("input",{"onUpdate:modelValue":t[3]||(t[3]=o=>l(s).student_id=o),type:"hidden",required:""},null,512),[[y,l(s).student_id,void 0,{number:!0}]])])),e("div",null,[t[24]||(t[24]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[v(" คอร์ส "),e("span",{class:"text-red-500"},"*")],-1)),p(e("select",{"onUpdate:modelValue":t[5]||(t[5]=o=>l(s).course_id=o),required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",onChange:V},[t[23]||(t[23]=e("option",{value:""},"เลือกคอร์ส",-1)),(u(!0),a(D,null,R(l(N),o=>(u(),a("option",{key:o.id,value:o.id},f(o.title),9,ze))),128))],544),[[j,l(s).course_id]])]),e("div",Oe,[t[27]||(t[27]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[v(" ประเภทการเรียน "),e("span",{class:"text-red-500"},"*")],-1)),e("div",Ie,[e("label",Fe,[p(e("input",{"onUpdate:modelValue":t[6]||(t[6]=o=>l(s).enrollment_type=o),type:"radio",value:"onsite",class:"mr-2 w-4 h-4 text-green-600 focus:ring-green-500"},null,512),[[H,l(s).enrollment_type]]),t[25]||(t[25]=e("span",{class:"text-gray-700"},"เรียนสด (Onsite)",-1))]),e("label",De,[p(e("input",{"onUpdate:modelValue":t[7]||(t[7]=o=>l(s).enrollment_type=o),type:"radio",value:"online",class:"mr-2 w-4 h-4 text-green-600 focus:ring-green-500"},null,512),[[H,l(s).enrollment_type]]),t[26]||(t[26]=e("span",{class:"text-gray-700"},"เรียนออนไลน์ (Online)",-1))])])]),l(s).enrollment_type==="onsite"?(u(),a("div",Re,[t[28]||(t[28]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[v(" สาขา "),e("span",{class:"text-red-500"},"*")],-1)),p(e("select",{"onUpdate:modelValue":t[8]||(t[8]=o=>l(s).branch_id=o),required:l(s).enrollment_type==="onsite",disabled:!l(s).course_id||l(i),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 disabled:bg-gray-100 disabled:cursor-not-allowed bg-white text-gray-900"},[e("option",Le,f(l(i)?"กำลังโหลด...":"เลือกสาขา"),1),(u(!0),a(D,null,R(l(C),o=>(u(),a("option",{key:o.id,value:o.id},f(o.name),9,Pe))),128))],8,Ne),[[j,l(s).branch_id]])])):w("",!0),l(s).enrollment_type==="online"&&l(s).student_id?(u(),a("div",He,[t[29]||(t[29]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[v(" ที่อยู่จัดส่ง "),e("span",{class:"text-red-500"},"*")],-1)),J(ie,{ref_key:"addressSelectRef",ref:T,modelValue:l(s).shipping_address_id,"onUpdate:modelValue":t[9]||(t[9]=o=>l(s).shipping_address_id=o),"user-id":l(s).student_id,required:l(s).enrollment_type==="online",placeholder:"เลือกที่อยู่จัดส่ง",hint:"สำหรับส่งเอกสารประกอบการเรียน",onAddNew:t[10]||(t[10]=o=>$.value=!0)},null,8,["modelValue","user-id","required"])])):l(s).enrollment_type==="online"&&!l(s).student_id?(u(),a("div",Je," กรุณาเลือกนักเรียนก่อนเพื่อเลือกที่อยู่จัดส่ง ")):w("",!0),e("div",null,[t[31]||(t[31]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[v(" สถานะ "),e("span",{class:"text-red-500"},"*")],-1)),p(e("select",{"onUpdate:modelValue":t[11]||(t[11]=o=>l(s).status=o),required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 bg-white text-gray-900"},[...t[30]||(t[30]=[e("option",{value:"pending"},"รอการยืนยัน",-1),e("option",{value:"active"},"กำลังเรียน",-1),e("option",{value:"completed"},"เรียนจบ",-1),e("option",{value:"cancelled"},"ยกเลิก",-1)])],512),[[j,l(s).status]])]),e("div",null,[t[32]||(t[32]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," วันที่ลงทะเบียน ",-1)),p(e("input",{"onUpdate:modelValue":t[12]||(t[12]=o=>l(s).enrollment_date=o),type:"datetime-local",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 bg-white text-gray-900",style:{"color-scheme":"light"}},null,512),[[y,l(s).enrollment_date]])])]),l(_)?(u(),a("div",Ke,f(l(_)),1)):w("",!0),l($)?(u(),a("div",{key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:t[16]||(t[16]=F(o=>$.value=!1,["self"]))},[e("div",Qe,[e("div",Ge,[t[34]||(t[34]=e("h3",{class:"text-xl font-bold"},"เพิ่มที่อยู่ใหม่",-1)),e("button",{onClick:t[13]||(t[13]=o=>$.value=!1),class:"text-gray-400 hover:text-gray-600"},[...t[33]||(t[33]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),J(ye,{ref_key:"addressFormRef",ref:E,address:null,onUpdate:t[14]||(t[14]=o=>A.value=o)},null,512),e("div",We,[e("button",{type:"button",onClick:t[15]||(t[15]=o=>$.value=!1),class:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-100"}," ยกเลิก "),e("button",{type:"button",onClick:te,disabled:l(r),class:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50"}," บันทึก ",8,Xe)])])])):w("",!0),e("div",Ye,[e("button",{type:"button",onClick:t[17]||(t[17]=o=>n.$emit("close")),class:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-100"}," ยกเลิก "),e("button",{type:"submit",disabled:l(r),class:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed"},[l(r)?(u(),a("span",et,"กำลังบันทึก...")):(u(),a("span",tt,"บันทึก"))],8,Ze)])],32)])])):w("",!0)}}),rt=Object.assign(st,{__name:"EnrollmentModal"});export{rt as E};
