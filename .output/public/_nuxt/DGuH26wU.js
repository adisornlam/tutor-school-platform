import{d as k,l as T,q as h,r as c,o as M,c as p,b as e,v as x,x as a,g as u,y as i,e as o,L as y,t as v,s as P,j as V,a as g}from"./B_rLn4hw.js";const U={class:"bg-white rounded-lg shadow p-6"},q={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},B={class:"space-y-4"},_={class:"flex items-center"},$={class:"flex items-center"},C={key:0,class:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded"},E={key:1,class:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded"},N={class:"flex justify-end"},A=["disabled"],L={key:0},j={key:1},F=k({__name:"SMTPTab",setup(z){const b=V(),{accessToken:f}=T(),r=h({host:"",port:587,secure:!1,username:"",password:"",from_email:"",from_name:"",enabled:!1}),n=c(!1),d=c(""),m=c(""),w=async()=>{n.value=!0,d.value="",m.value="";try{const t=await $fetch(`${b.public.apiBase}/admin/settings/email/smtp`,{headers:{Authorization:`Bearer ${f.value}`}});t.success&&(r.host=t.data.host,r.port=t.data.port,r.secure=t.data.secure,r.username=t.data.username,r.from_email=t.data.from_email,r.from_name=t.data.from_name,r.enabled=t.data.enabled)}catch(t){console.error("Error loading SMTP settings:",t),d.value=t.data?.message||"เกิดข้อผิดพลาดในการโหลดข้อมูล"}finally{n.value=!1}},S=async()=>{n.value=!0,d.value="",m.value="";try{await $fetch(`${b.public.apiBase}/admin/settings/email/smtp`,{method:"PUT",headers:{Authorization:`Bearer ${f.value}`},body:r}),m.value="บันทึกการตั้งค่า SMTP เรียบร้อยแล้ว"}catch(t){console.error("Error saving SMTP settings:",t),d.value=t.data?.message||"เกิดข้อผิดพลาดในการบันทึกข้อมูล"}finally{n.value=!1}};return M(()=>{w()}),(t,s)=>(g(),p("div",U,[s[16]||(s[16]=e("div",{class:"mb-6"},[e("h2",{class:"text-2xl font-bold mb-2"},"ตั้งค่า SMTP"),e("p",{class:"text-gray-600"},"กำหนดค่าการส่งอีเมลผ่าน SMTP Server")],-1)),e("form",{onSubmit:P(S,["prevent"]),class:"space-y-6"},[e("div",q,[e("div",null,[s[8]||(s[8]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[u(" SMTP Host "),e("span",{class:"text-red-500"},"*")],-1)),a(e("input",{"onUpdate:modelValue":s[0]||(s[0]=l=>o(r).host=l),type:"text",required:"",placeholder:"smtp.gmail.com",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"},null,512),[[i,o(r).host]])]),e("div",null,[s[9]||(s[9]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[u(" SMTP Port "),e("span",{class:"text-red-500"},"*")],-1)),a(e("input",{"onUpdate:modelValue":s[1]||(s[1]=l=>o(r).port=l),type:"number",required:"",min:"1",max:"65535",placeholder:"587",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"},null,512),[[i,o(r).port,void 0,{number:!0}]])]),e("div",null,[s[10]||(s[10]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[u(" Username "),e("span",{class:"text-red-500"},"*")],-1)),a(e("input",{"onUpdate:modelValue":s[2]||(s[2]=l=>o(r).username=l),type:"text",required:"",placeholder:"your-email@gmail.com",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"},null,512),[[i,o(r).username]])]),e("div",null,[s[11]||(s[11]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[u(" Password "),e("span",{class:"text-red-500"},"*")],-1)),a(e("input",{"onUpdate:modelValue":s[3]||(s[3]=l=>o(r).password=l),type:"password",required:"",placeholder:"••••••••",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"},null,512),[[i,o(r).password]])]),e("div",null,[s[12]||(s[12]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[u(" จากอีเมล (From Email) "),e("span",{class:"text-red-500"},"*")],-1)),a(e("input",{"onUpdate:modelValue":s[4]||(s[4]=l=>o(r).from_email=l),type:"email",required:"",placeholder:"noreply@example.com",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"},null,512),[[i,o(r).from_email]])]),e("div",null,[s[13]||(s[13]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[u(" จากชื่อ (From Name) "),e("span",{class:"text-red-500"},"*")],-1)),a(e("input",{"onUpdate:modelValue":s[5]||(s[5]=l=>o(r).from_name=l),type:"text",required:"",placeholder:"Tutor School",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"},null,512),[[i,o(r).from_name]])])]),e("div",B,[e("div",_,[a(e("input",{"onUpdate:modelValue":s[6]||(s[6]=l=>o(r).secure=l),type:"checkbox",id:"secure",class:"w-4 h-4 text-green-600 border-gray-300 rounded focus:ring-green-500"},null,512),[[y,o(r).secure]]),s[14]||(s[14]=e("label",{for:"secure",class:"ml-2 text-sm font-medium text-gray-700"}," ใช้ SSL/TLS (Secure) ",-1))]),e("div",$,[a(e("input",{"onUpdate:modelValue":s[7]||(s[7]=l=>o(r).enabled=l),type:"checkbox",id:"enabled",class:"w-4 h-4 text-green-600 border-gray-300 rounded focus:ring-green-500"},null,512),[[y,o(r).enabled]]),s[15]||(s[15]=e("label",{for:"enabled",class:"ml-2 text-sm font-medium text-gray-700"}," เปิดใช้งานการส่งอีเมล ",-1))])]),o(d)?(g(),p("div",C,v(o(d)),1)):x("",!0),o(m)?(g(),p("div",E,v(o(m)),1)):x("",!0),e("div",N,[e("button",{type:"submit",disabled:o(n),class:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed"},[o(n)?(g(),p("span",L,"กำลังบันทึก...")):(g(),p("span",j,"บันทึกการตั้งค่า"))],8,A)])],32)]))}});export{F as _};
