import{d as V,l as C,r as y,q as U,E as h,c as i,b as s,v as b,x as r,g as c,y as l,e as o,t as f,L as x,s as M,a as u}from"./B_rLn4hw.js";const E={class:"bg-white rounded-lg shadow p-6"},G={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},I={key:0,class:"mt-1 text-xs text-gray-500"},S={class:"flex items-center space-x-4"},T={class:"flex items-center"},A={class:"flex items-center"},B={key:0,class:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded"},N={class:"flex justify-end space-x-3 pt-4"},q=["disabled"],D={key:0},P={key:1},L=V({__name:"GenericGatewayConfig",props:{gatewayConfig:{},paymentMethodId:{},gatewayCode:{}},emits:["saved"],setup(p,{emit:_}){const g=p,w=_,{accessToken:v}=C(),m=y(!1),d=y(""),t=U({gateway_code:"",gateway_name:"",api_key:"",api_secret:"",merchant_id:"",webhook_secret:"",endpoint_url:"",is_test_mode:!0,is_active:!1});h(()=>[g.gatewayConfig,g.gatewayCode],([n,e])=>{n?(t.gateway_code=n.gateway_code||e||"",t.gateway_name=n.gateway_name||"",t.api_key=n.api_key||"",t.merchant_id=n.merchant_id||"",t.endpoint_url=n.endpoint_url||"",t.is_test_mode=n.is_test_mode!==void 0?n.is_test_mode:!0,t.is_active=n.is_active!==void 0?n.is_active:!1):(t.gateway_code=e||"",t.gateway_name="",t.api_key="",t.api_secret="",t.merchant_id="",t.webhook_secret="",t.endpoint_url="",t.is_test_mode=!0,t.is_active=!1),d.value=""},{immediate:!0});const k=async()=>{m.value=!0,d.value="";try{await $fetch(`/api/admin/settings/payment-methods/${g.paymentMethodId}/gateway`,{method:"PUT",headers:{Authorization:`Bearer ${v.value}`},body:t}),w("saved")}catch(n){console.error("Error saving gateway config:",n),d.value=n.data?.message||"เกิดข้อผิดพลาดในการบันทึกข้อมูล"}finally{m.value=!1}};return(n,e)=>(u(),i("div",E,[e[18]||(e[18]=s("h3",{class:"text-lg font-semibold mb-4"},"การตั้งค่า Gateway",-1)),s("form",{onSubmit:M(k,["prevent"]),class:"space-y-4"},[s("div",G,[s("div",null,[e[9]||(e[9]=s("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[c(" Gateway Code "),s("span",{class:"text-red-500"},"*")],-1)),r(s("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>o(t).gateway_code=a),type:"text",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"},null,512),[[l,o(t).gateway_code]])]),s("div",null,[e[10]||(e[10]=s("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[c(" Gateway Name "),s("span",{class:"text-red-500"},"*")],-1)),r(s("input",{"onUpdate:modelValue":e[1]||(e[1]=a=>o(t).gateway_name=a),type:"text",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"},null,512),[[l,o(t).gateway_name]])]),s("div",null,[e[11]||(e[11]=s("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," API Key ",-1)),r(s("input",{"onUpdate:modelValue":e[2]||(e[2]=a=>o(t).api_key=a),type:"text",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 font-mono text-sm"},null,512),[[l,o(t).api_key]])]),s("div",null,[e[12]||(e[12]=s("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," API Secret ",-1)),r(s("input",{"onUpdate:modelValue":e[3]||(e[3]=a=>o(t).api_secret=a),type:"password",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 font-mono text-sm"},null,512),[[l,o(t).api_secret]]),p.gatewayConfig?.api_secret?(u(),i("p",I," ปัจจุบัน: "+f(p.gatewayConfig.api_secret)+" (กรอกเฉพาะเมื่อต้องการเปลี่ยน) ",1)):b("",!0)]),s("div",null,[e[13]||(e[13]=s("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Merchant ID ",-1)),r(s("input",{"onUpdate:modelValue":e[4]||(e[4]=a=>o(t).merchant_id=a),type:"text",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"},null,512),[[l,o(t).merchant_id]])]),s("div",null,[e[14]||(e[14]=s("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Webhook Secret ",-1)),r(s("input",{"onUpdate:modelValue":e[5]||(e[5]=a=>o(t).webhook_secret=a),type:"password",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 font-mono text-sm"},null,512),[[l,o(t).webhook_secret]])]),s("div",null,[e[15]||(e[15]=s("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Endpoint URL ",-1)),r(s("input",{"onUpdate:modelValue":e[6]||(e[6]=a=>o(t).endpoint_url=a),type:"url",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"},null,512),[[l,o(t).endpoint_url]])])]),s("div",S,[s("label",T,[r(s("input",{"onUpdate:modelValue":e[7]||(e[7]=a=>o(t).is_test_mode=a),type:"checkbox",class:"w-4 h-4 text-green-600 border-gray-300 rounded focus:ring-green-500"},null,512),[[x,o(t).is_test_mode]]),e[16]||(e[16]=s("span",{class:"ml-2 text-sm text-gray-700"},"Test Mode",-1))]),s("label",A,[r(s("input",{"onUpdate:modelValue":e[8]||(e[8]=a=>o(t).is_active=a),type:"checkbox",class:"w-4 h-4 text-green-600 border-gray-300 rounded focus:ring-green-500"},null,512),[[x,o(t).is_active]]),e[17]||(e[17]=s("span",{class:"ml-2 text-sm text-gray-700"},"เปิดใช้งาน",-1))])]),o(d)?(u(),i("div",B,f(o(d)),1)):b("",!0),s("div",N,[s("button",{type:"submit",disabled:o(m),class:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed"},[o(m)?(u(),i("span",D,"กำลังบันทึก...")):(u(),i("span",P,"บันทึก"))],8,q)])],32)]))}});export{L as _};
