import{d as b,l as v,r as y,q as x,E as h,c as r,b as s,s as w,x as d,J as _,e as n,y as k,v as T,g as E,a as i}from"./CX4WDIMJ.js";const V={class:"space-y-6"},B={class:"bg-white rounded-lg shadow p-6"},U={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},q={class:"flex justify-end pt-4"},M=["disabled"],N={key:0,class:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"},A=b({__name:"LanguageTab",props:{settings:{}},emits:["saved"],setup(u,{emit:g}){const m=u,p=g,{accessToken:c}=v(),l=y(!1),t=x({default_language:"th",supported_languages:"th,en"});h(()=>m.settings,a=>{a&&a.length>0&&a.forEach(e=>{const o=e.key;o in t&&(t[o]=e.value||t[o])})},{immediate:!0});const f=async()=>{try{l.value=!0;const a=Object.keys(t).map(e=>({key:e,value:t[e]}));await $fetch("/api/admin/settings/system",{method:"PUT",headers:{Authorization:`Bearer ${c.value}`},body:{settings:a}}),p("saved")}catch(a){console.error("Error saving language settings:",a),alert(a.data?.message||"เกิดข้อผิดพลาดในการบันทึกการตั้งค่า")}finally{l.value=!1}};return(a,e)=>(i(),r("div",V,[s("div",B,[e[7]||(e[7]=s("h2",{class:"text-xl font-semibold mb-4"},"การตั้งค่าภาษา",-1)),s("form",{onSubmit:w(f,["prevent"]),class:"space-y-4"},[s("div",U,[s("div",null,[e[3]||(e[3]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," ภาษาหลัก ",-1)),d(s("select",{"onUpdate:modelValue":e[0]||(e[0]=o=>n(t).default_language=o),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",required:""},[...e[2]||(e[2]=[s("option",{value:"th"},"ไทย (Thai)",-1),s("option",{value:"en"},"English",-1)])],512),[[_,n(t).default_language]])]),s("div",null,[e[4]||(e[4]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," ภาษาที่รองรับ (คั่นด้วย comma) ",-1)),d(s("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>n(t).supported_languages=o),type:"text",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"th,en",required:""},null,512),[[k,n(t).supported_languages]]),e[5]||(e[5]=s("p",{class:"mt-1 text-sm text-gray-500"}," ตัวอย่าง: th,en (ไทย, อังกฤษ) ",-1))])]),s("div",q,[s("button",{type:"submit",disabled:n(l),class:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center"},[n(l)?(i(),r("span",N)):T("",!0),e[6]||(e[6]=E(" บันทึก ",-1))],8,M)])],32)])]))}});export{A as _};
