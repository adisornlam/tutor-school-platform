import{_ as w}from"./BsAiViFK.js";import{_ as v}from"./C3Q-pcvS.js";import{_ as k}from"./CQrG7wCx.js";import{d as _,l as b,r as c,o as C,c as d,e as o,b as g,t as x,k as l,a}from"./B_rLn4hw.js";const M={class:"space-y-6"},S={key:0,class:"text-center py-8"},$={key:1,class:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded"},B={key:2},z=_({__name:"GatewayConfigSection",props:{paymentMethodId:{},gatewayCode:{}},emits:["saved"],setup(e,{emit:f}){const u=e,h=f,{accessToken:p}=b(),i=c(!1),n=c(null),s=c(null),y=async()=>{try{i.value=!0,n.value=null;const t=await $fetch(`/api/admin/settings/payment-methods/${u.paymentMethodId}/gateway`,{headers:{Authorization:`Bearer ${p.value}`}});t.success?s.value=t.data:n.value="ไม่สามารถโหลดการตั้งค่า Gateway ได้"}catch(t){console.error("Error loading gateway config:",t),n.value=t.data?.message||"เกิดข้อผิดพลาดในการโหลดการตั้งค่า Gateway"}finally{i.value=!1}},r=()=>{y(),h("saved")};return C(()=>{y()}),(t,m)=>(a(),d("div",M,[o(i)?(a(),d("div",S,[...m[0]||(m[0]=[g("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-green-600"},null,-1),g("p",{class:"mt-2 text-gray-600"},"กำลังโหลด...",-1)])])):o(n)?(a(),d("div",$,x(o(n)),1)):(a(),d("div",B,[e.gatewayCode==="stripe"?(a(),l(w,{key:0,"gateway-config":o(s),"payment-method-id":e.paymentMethodId,onSaved:r},null,8,["gateway-config","payment-method-id"])):e.gatewayCode==="ksher"?(a(),l(v,{key:1,"gateway-config":o(s),"payment-method-id":e.paymentMethodId,onSaved:r},null,8,["gateway-config","payment-method-id"])):(a(),l(k,{key:2,"gateway-config":o(s),"payment-method-id":e.paymentMethodId,"gateway-code":e.gatewayCode,onSaved:r},null,8,["gateway-config","payment-method-id","gateway-code"]))]))]))}});export{z as _};
