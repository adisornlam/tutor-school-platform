import{_ as b}from"./0JwXLbdW.js";import{d as k,r as p,o as M,c as n,b as t,f,w as v,x as h,y as C,e as a,J as $,t as l,F as B,i as H,a as i,n as L,s as S}from"./CX4WDIMJ.js";import{f as j}from"./BALXvQ8s.js";import{t as D}from"./CiM0_A9B.js";const E={class:"flex items-center justify-between mb-6"},T={class:"bg-white rounded-lg shadow p-4 mb-6"},V={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},N={class:"bg-white rounded-lg shadow overflow-hidden"},U={key:0,class:"p-8 text-center"},z={key:1,class:"p-4 bg-red-50 border border-red-200 text-red-700 rounded"},F={key:2,class:"p-8 text-center text-gray-500"},P={key:3,class:"min-w-full divide-y divide-gray-200"},A={class:"bg-white divide-y divide-gray-200"},I={class:"px-6 py-4"},J={class:"text-sm font-medium text-gray-900"},R={class:"px-6 py-4"},q={class:"text-sm text-gray-600 font-mono"},G={class:"px-6 py-4 whitespace-nowrap"},K={class:"px-6 py-4 whitespace-nowrap"},O={class:"text-sm text-gray-900"},Q={class:"px-6 py-4 whitespace-nowrap"},W={class:"text-sm text-gray-600"},X={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},Y={class:"flex items-center justify-end space-x-2"},Z=["href"],tt=["onClick"],it=k({__name:"index",setup(et){const x=p([]),m=p(!0),c=p(null),r=p({search:"",status:""});let g=null;const y=()=>{g&&clearTimeout(g),g=setTimeout(()=>{u()},500)},w=o=>j(new Date(o),"dd MMM yyyy HH:mm",{locale:D}),u=async()=>{m.value=!0,c.value=null;try{const o=new URLSearchParams;r.value.search&&o.append("search",r.value.search),r.value.status&&o.append("status",r.value.status);const e=await $fetch(`/api/admin/content-pages${o.toString()?"?"+o.toString():""}`);e.success&&(x.value=e.data.filter(d=>!(r.value.status==="active"&&!d.is_active||r.value.status==="inactive"&&d.is_active)))}catch(o){console.error("Error loading pages:",o),c.value=o.data?.message||o.message||"ไม่สามารถโหลดข้อมูลได้"}finally{m.value=!1}},_=async o=>{if(confirm(`คุณแน่ใจหรือไม่ว่าต้องการลบหน้า "${o.title}"?`))try{await $fetch(`/api/admin/content-pages/${o.id}`,{method:"DELETE"}),await u()}catch(e){alert(e.data?.message||e.message||"ไม่สามารถลบได้")}};return M(()=>{u()}),(o,e)=>{const d=b;return i(),n("div",null,[t("div",E,[e[3]||(e[3]=t("h1",{class:"text-3xl font-bold"},"จัดการหน้าเว็บไซต์",-1)),f(d,{to:"/admin/content/pages/new",class:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center space-x-2"},{default:v(()=>[...e[2]||(e[2]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),t("span",null,"เพิ่มหน้าใหม่",-1)])]),_:1})]),t("div",T,[t("div",V,[t("div",null,[e[4]||(e[4]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"ค้นหา",-1)),h(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>a(r).search=s),type:"text",placeholder:"ค้นหาด้วยชื่อ, slug",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",onInput:y},null,544),[[C,a(r).search]])]),t("div",null,[e[6]||(e[6]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"สถานะ",-1)),h(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>a(r).status=s),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",onChange:u},[...e[5]||(e[5]=[t("option",{value:""},"ทั้งหมด",-1),t("option",{value:"active"},"ใช้งาน",-1),t("option",{value:"inactive"},"ไม่ใช้งาน",-1)])],544),[[$,a(r).status]])])])]),t("div",N,[a(m)?(i(),n("div",U,[...e[7]||(e[7]=[t("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-green-600"},null,-1),t("p",{class:"mt-2 text-gray-600"},"กำลังโหลด...",-1)])])):a(c)?(i(),n("div",z,l(a(c)),1)):a(x).length===0?(i(),n("div",F," ไม่พบหน้าเว็บไซต์ ")):(i(),n("table",P,[e[11]||(e[11]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"ชื่อ"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Slug"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"สถานะ"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"ลำดับ"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"อัปเดตล่าสุด"),t("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"จัดการ")])],-1)),t("tbody",A,[(i(!0),n(B,null,H(a(x),s=>(i(),n("tr",{key:s.id,class:"hover:bg-gray-50"},[t("td",I,[t("div",J,l(s.title),1)]),t("td",R,[t("div",q,"/"+l(s.slug),1)]),t("td",G,[t("span",{class:L(["px-2 py-1 text-xs font-medium rounded",{"bg-green-100 text-green-800":s.is_active,"bg-gray-100 text-gray-800":!s.is_active}])},l(s.is_active?"ใช้งาน":"ไม่ใช้งาน"),3)]),t("td",K,[t("div",O,l(s.display_order),1)]),t("td",Q,[t("div",W,l(w(s.updated_at)),1)]),t("td",X,[t("div",Y,[t("a",{href:`/${s.slug}`,target:"_blank",class:"text-blue-600 hover:text-blue-900",title:"ดูหน้าเว็บไซต์"},[...e[8]||(e[8]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})],-1)])],8,Z),f(d,{to:`/admin/content/pages/${s.id}/edit`,class:"text-blue-600 hover:text-blue-900",title:"แก้ไข"},{default:v(()=>[...e[9]||(e[9]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])]),_:1},8,["to"]),t("button",{onClick:S(st=>_(s),["stop"]),class:"text-red-600 hover:text-red-900",title:"ลบ"},[...e[10]||(e[10]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,tt)])])]))),128))])]))])])}}});export{it as default};
