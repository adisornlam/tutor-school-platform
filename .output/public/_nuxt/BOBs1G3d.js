import{d as M,m as N,l as B,r as m,o as j,c as r,b as t,v as D,e as o,t as a,n as g,F as x,i as p,j as S,a as d}from"./CX4WDIMJ.js";import{f as $}from"./BALXvQ8s.js";import{t as z}from"./CiM0_A9B.js";const E={class:"flex items-center justify-between mb-6"},H={class:"flex items-center space-x-4"},R={key:0,class:"text-center py-12"},A={key:1,class:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg"},F={key:2,class:"space-y-6"},I={class:"bg-white rounded-lg shadow p-6"},V={class:"flex items-center justify-between mb-6"},L={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},T={class:"text-lg font-medium text-gray-900"},U={class:"text-gray-900"},q={class:"text-gray-900"},G={class:"text-gray-900"},J={class:"text-gray-900"},K={class:"bg-white rounded-lg shadow p-6"},O={key:0,class:"space-y-4"},P={class:"flex items-center justify-between mb-3"},Q={class:"text-lg font-medium text-gray-900"},W={class:"px-2 py-1 text-xs font-medium rounded bg-blue-100 text-blue-800"},X={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Y={class:"text-gray-900"},Z={class:"text-gray-900"},tt={key:1,class:"text-center py-8 text-gray-500"},st={class:"bg-white rounded-lg shadow p-6"},et={key:0,class:"space-y-4"},ot={class:"flex items-start justify-between"},at={class:"flex-1"},nt={class:"flex items-center space-x-3 mb-2"},lt={class:"text-lg font-medium text-gray-900"},rt={class:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm"},dt={class:"ml-2 text-gray-900"},it={class:"ml-2 text-gray-900"},ut={class:"ml-2 text-gray-900"},mt={key:1,class:"text-center py-8 text-gray-500"},yt=M({__name:"[id]",setup(ct){const y=N(),b=S(),{accessToken:v}=B(),f=parseInt(y.params.id),u=m(!0),i=m(""),n=m(null),_=async()=>{u.value=!0,i.value="";try{const e=await $fetch(`${b.public.apiBase}/admin/students/${f}`,{headers:{Authorization:`Bearer ${v.value}`}});e.success&&(n.value=e.data)}catch(e){console.error("Error loading student detail:",e),i.value=e.data?.message||"เกิดข้อผิดพลาดในการโหลดข้อมูล"}finally{u.value=!1}},h=e=>({active:"ใช้งาน",inactive:"ปิดใช้งาน",suspended:"ระงับ"})[e]||e,k=e=>({active:"bg-green-100 text-green-800",inactive:"bg-gray-100 text-gray-800",suspended:"bg-red-100 text-red-800"})[e]||"bg-gray-100 text-gray-800",w=e=>({father:"บิดา",mother:"มารดา",guardian:"ผู้ปกครอง",other:"อื่นๆ"})[e]||e,C=e=>({pending:"รอดำเนินการ",active:"กำลังเรียน",completed:"เรียนจบ",cancelled:"ยกเลิก"})[e]||e,c=e=>$(new Date(e),"dd MMM yyyy HH:mm",{locale:z});return j(()=>{_()}),(e,s)=>(d(),r("div",null,[t("div",E,[t("div",H,[t("button",{onClick:s[0]||(s[0]=l=>e.$router.back()),class:"p-2 hover:bg-gray-100 rounded-lg"},[...s[1]||(s[1]=[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1)])]),s[2]||(s[2]=t("h1",{class:"text-3xl font-bold"},"รายละเอียดนักเรียน",-1))])]),o(u)?(d(),r("div",R,[...s[3]||(s[3]=[t("div",{class:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"},null,-1),t("p",{class:"mt-4 text-gray-600"},"กำลังโหลดข้อมูล...",-1)])])):o(i)?(d(),r("div",A,a(o(i)),1)):o(n)?(d(),r("div",F,[t("div",I,[t("div",V,[s[4]||(s[4]=t("h2",{class:"text-xl font-semibold"},"ข้อมูลนักเรียน",-1)),t("span",{class:g(["px-3 py-1 text-sm font-medium rounded",k(o(n).student.status)])},a(h(o(n).student.status)),3)]),t("div",L,[t("div",null,[s[5]||(s[5]=t("label",{class:"block text-sm font-medium text-gray-500 mb-1"},"ชื่อ-นามสกุล",-1)),t("p",T,a(o(n).student.first_name)+" "+a(o(n).student.last_name),1)]),t("div",null,[s[6]||(s[6]=t("label",{class:"block text-sm font-medium text-gray-500 mb-1"},"Username",-1)),t("p",U,a(o(n).student.username),1)]),t("div",null,[s[7]||(s[7]=t("label",{class:"block text-sm font-medium text-gray-500 mb-1"},"Email",-1)),t("p",q,a(o(n).student.email||"-"),1)]),t("div",null,[s[8]||(s[8]=t("label",{class:"block text-sm font-medium text-gray-500 mb-1"},"เบอร์โทรศัพท์",-1)),t("p",G,a(o(n).student.phone||"-"),1)]),t("div",null,[s[9]||(s[9]=t("label",{class:"block text-sm font-medium text-gray-500 mb-1"},"วันที่สร้าง",-1)),t("p",J,a(c(o(n).student.created_at)),1)])])]),t("div",K,[s[13]||(s[13]=t("h2",{class:"text-xl font-semibold mb-4"},"ผู้ปกครอง",-1)),o(n).parents&&o(n).parents.length>0?(d(),r("div",O,[(d(!0),r(x,null,p(o(n).parents,l=>(d(),r("div",{key:l.id,class:"border border-gray-200 rounded-lg p-4"},[t("div",P,[t("h3",Q,a(l.first_name)+" "+a(l.last_name),1),t("span",W,a(w(l.relationship)),1)]),t("div",X,[t("div",null,[s[10]||(s[10]=t("label",{class:"block text-sm font-medium text-gray-500 mb-1"},"Email",-1)),t("p",Y,a(l.email||"-"),1)]),t("div",null,[s[11]||(s[11]=t("label",{class:"block text-sm font-medium text-gray-500 mb-1"},"เบอร์โทรศัพท์",-1)),t("p",Z,a(l.phone||"-"),1)])])]))),128))])):(d(),r("div",tt,[...s[12]||(s[12]=[t("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})],-1),t("p",{class:"mt-2"},"ไม่มีข้อมูลผู้ปกครอง",-1)])]))]),t("div",st,[s[18]||(s[18]=t("h2",{class:"text-xl font-semibold mb-4"},"คอร์สที่ลงทะเบียน",-1)),o(n).enrollments&&o(n).enrollments.length>0?(d(),r("div",et,[(d(!0),r(x,null,p(o(n).enrollments,l=>(d(),r("div",{key:l.id,class:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50 transition-colors"},[t("div",ot,[t("div",at,[t("div",nt,[t("h3",lt,a(l.course.title),1),t("span",{class:g(["px-2 py-1 text-xs font-medium rounded",l.status==="active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"])},a(C(l.status)),3)]),t("div",rt,[t("div",null,[s[14]||(s[14]=t("span",{class:"text-gray-500"},"รหัสคอร์ส:",-1)),t("span",dt,a(l.course.code),1)]),t("div",null,[s[15]||(s[15]=t("span",{class:"text-gray-500"},"สาขา:",-1)),t("span",it,a(l.branch.name),1)]),t("div",null,[s[16]||(s[16]=t("span",{class:"text-gray-500"},"วันที่ลงทะเบียน:",-1)),t("span",ut,a(c(l.enrolled_at)),1)])])])])]))),128))])):(d(),r("div",mt,[...s[17]||(s[17]=[t("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})],-1),t("p",{class:"mt-2"},"ยังไม่ได้ลงทะเบียนคอร์สใดๆ",-1)])]))])])):D("",!0)]))}});export{yt as default};
