import{d as U,l as $,r as c,q as C,E as M,c as m,v as x,b as t,t as v,s as k,x as r,g,y as a,e as o,J as B,L as w,a as p}from"./B_rLn4hw.js";const S={class:"bg-white rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto"},T={class:"flex items-center justify-between mb-6"},j={class:"text-2xl font-bold"},q={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},z=["disabled"],P=["disabled"],A={class:"md:col-span-2"},E={class:"md:col-span-2 flex items-center space-x-4"},L={class:"flex items-center"},N={class:"flex items-center"},h={key:0,class:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded"},D={class:"flex justify-end space-x-3 pt-4"},G=["disabled"],I={key:0},J={key:1},R=U({__name:"PaymentMethodModal",props:{show:{type:Boolean},method:{default:null}},emits:["close","saved"],setup(d,{emit:V}){const b=d,f=V,{accessToken:y}=$(),u=c(!1),i=c(""),s=C({code:"",name:"",name_en:"",type:"bank_transfer",description:"",icon:"",is_active:!0,is_default:!1,display_order:0});M(()=>b.method,l=>{l?(s.code=l.code||"",s.name=l.name||"",s.name_en=l.name_en||"",s.type=l.type||"bank_transfer",s.description=l.description||"",s.icon=l.icon||"",s.is_active=l.is_active!==void 0?l.is_active:!0,s.is_default=l.is_default!==void 0?l.is_default:!1,s.display_order=l.display_order||0):(s.code="",s.name="",s.name_en="",s.type="bank_transfer",s.description="",s.icon="",s.is_active=!0,s.is_default=!1,s.display_order=0),i.value=""},{immediate:!0});const _=async()=>{u.value=!0,i.value="";try{b.method?await $fetch(`/api/admin/settings/payment-methods/${b.method.id}`,{method:"PUT",headers:{Authorization:`Bearer ${y.value}`},body:s}):await $fetch("/api/admin/settings/payment-methods",{method:"POST",headers:{Authorization:`Bearer ${y.value}`},body:s}),f("saved"),f("close")}catch(l){console.error("Error saving payment method:",l),i.value=l.data?.message||"เกิดข้อผิดพลาดในการบันทึกข้อมูล"}finally{u.value=!1}};return(l,e)=>d.show?(p(),m("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:e[11]||(e[11]=k(n=>l.$emit("close"),["self"]))},[t("div",S,[t("div",T,[t("h2",j,v(d.method?"แก้ไขวิธีชำระเงิน":"เพิ่มวิธีชำระเงิน"),1),t("button",{onClick:e[0]||(e[0]=n=>l.$emit("close")),class:"text-gray-400 hover:text-gray-600"},[...e[12]||(e[12]=[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),t("form",{onSubmit:k(_,["prevent"]),class:"space-y-4"},[t("div",q,[t("div",null,[e[13]||(e[13]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[g(" รหัส (Code) "),t("span",{class:"text-red-500"},"*")],-1)),r(t("input",{"onUpdate:modelValue":e[1]||(e[1]=n=>o(s).code=n),type:"text",required:"",disabled:!!d.method,pattern:"[a-z0-9_]+",placeholder:"bank_transfer",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 disabled:bg-gray-100"},null,8,z),[[a,o(s).code]]),e[14]||(e[14]=t("p",{class:"mt-1 text-xs text-gray-500"},"ใช้ตัวพิมพ์เล็ก, ตัวเลข และ _ เท่านั้น",-1))]),t("div",null,[e[16]||(e[16]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[g(" ประเภท "),t("span",{class:"text-red-500"},"*")],-1)),r(t("select",{"onUpdate:modelValue":e[2]||(e[2]=n=>o(s).type=n),required:"",disabled:!!d.method,class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 disabled:bg-gray-100"},[...e[15]||(e[15]=[t("option",{value:"bank_transfer"},"โอนเงินผ่านธนาคาร",-1),t("option",{value:"payment_gateway"},"Payment Gateway",-1),t("option",{value:"other"},"อื่นๆ",-1)])],8,P),[[B,o(s).type]])]),t("div",null,[e[17]||(e[17]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[g(" ชื่อ (ภาษาไทย) "),t("span",{class:"text-red-500"},"*")],-1)),r(t("input",{"onUpdate:modelValue":e[3]||(e[3]=n=>o(s).name=n),type:"text",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"},null,512),[[a,o(s).name]])]),t("div",null,[e[18]||(e[18]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," ชื่อ (ภาษาอังกฤษ) ",-1)),r(t("input",{"onUpdate:modelValue":e[4]||(e[4]=n=>o(s).name_en=n),type:"text",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"},null,512),[[a,o(s).name_en]])]),t("div",A,[e[19]||(e[19]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," คำอธิบาย ",-1)),r(t("textarea",{"onUpdate:modelValue":e[5]||(e[5]=n=>o(s).description=n),rows:"2",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"},null,512),[[a,o(s).description]])]),t("div",null,[e[20]||(e[20]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Icon URL ",-1)),r(t("input",{"onUpdate:modelValue":e[6]||(e[6]=n=>o(s).icon=n),type:"url",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"},null,512),[[a,o(s).icon]])]),t("div",null,[e[21]||(e[21]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," ลำดับการแสดงผล ",-1)),r(t("input",{"onUpdate:modelValue":e[7]||(e[7]=n=>o(s).display_order=n),type:"number",min:"0",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"},null,512),[[a,o(s).display_order,void 0,{number:!0}]])]),t("div",E,[t("label",L,[r(t("input",{"onUpdate:modelValue":e[8]||(e[8]=n=>o(s).is_active=n),type:"checkbox",class:"w-4 h-4 text-green-600 border-gray-300 rounded focus:ring-green-500"},null,512),[[w,o(s).is_active]]),e[22]||(e[22]=t("span",{class:"ml-2 text-sm text-gray-700"},"เปิดใช้งาน",-1))]),t("label",N,[r(t("input",{"onUpdate:modelValue":e[9]||(e[9]=n=>o(s).is_default=n),type:"checkbox",class:"w-4 h-4 text-green-600 border-gray-300 rounded focus:ring-green-500"},null,512),[[w,o(s).is_default]]),e[23]||(e[23]=t("span",{class:"ml-2 text-sm text-gray-700"},"ตั้งเป็นค่าเริ่มต้น",-1))])])]),o(i)?(p(),m("div",h,v(o(i)),1)):x("",!0),t("div",D,[t("button",{type:"button",onClick:e[10]||(e[10]=n=>l.$emit("close")),class:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-100"}," ยกเลิก "),t("button",{type:"submit",disabled:o(u),class:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed"},[o(u)?(p(),m("span",I,"กำลังบันทึก...")):(p(),m("span",J,"บันทึก"))],8,G)])],32)])])):x("",!0)}});export{R as _};
