import{_}from"./BlVozWiI.js";import{d as V,p as S,r as p,c as d,b as t,v as c,f as g,w as x,e as l,t as v,x as r,g as b,y as n,J as U,s as M,a}from"./B_rLn4hw.js";import{R as E}from"./Bxq2twJv.js";const T={class:"flex items-center justify-between mb-6"},C={class:"flex items-center space-x-4"},N={key:0,class:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-6"},B={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},D={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},R={key:0,class:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg"},j={class:"flex justify-end space-x-4 pt-4 border-t"},O=["disabled"],q={key:0},K={key:1},z=V({__name:"new",setup(L){const w=S(),y=p(null),i=p(!1),u=p(null),o=p({slug:"",title:"",content:"",meta_title:"",meta_description:"",meta_keywords:"",is_active:!0,display_order:0}),k=async()=>{i.value=!0,u.value=null;try{await $fetch("/api/admin/content-pages",{method:"POST",body:{slug:o.value.slug,title:o.value.title,content:o.value.content||null,meta_title:o.value.meta_title||null,meta_description:o.value.meta_description||null,meta_keywords:o.value.meta_keywords||null,is_active:o.value.is_active,display_order:o.value.display_order}}),w.push("/admin/content/pages")}catch(m){console.error("Error saving page:",m),u.value=m.data?.message||m.message||"ไม่สามารถบันทึกได้"}finally{i.value=!1}};return(m,e)=>{const f=_;return a(),d("div",null,[t("div",T,[t("div",C,[g(f,{to:"/admin/content/pages",class:"p-2 hover:bg-gray-100 rounded-lg"},{default:x(()=>[...e[8]||(e[8]=[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1)])]),_:1}),e[9]||(e[9]=t("h1",{class:"text-3xl font-bold"},"เพิ่มหน้าเว็บไซต์ใหม่",-1))])]),l(y)?(a(),d("div",N,v(l(y)),1)):c("",!0),t("form",{onSubmit:M(k,["prevent"]),class:"bg-white rounded-lg shadow p-6 space-y-6"},[t("div",B,[t("div",null,[e[10]||(e[10]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[b(" Slug "),t("span",{class:"text-red-500"},"*")],-1)),r(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>l(o).slug=s),type:"text",required:"",placeholder:"about, contact, help",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 font-mono"},null,512),[[n,l(o).slug]]),e[11]||(e[11]=t("p",{class:"mt-1 text-sm text-gray-500"},"URL path สำหรับหน้าเว็บไซต์ (เช่น: /about, /contact)",-1))]),t("div",null,[e[12]||(e[12]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[b(" ชื่อหน้า "),t("span",{class:"text-red-500"},"*")],-1)),r(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>l(o).title=s),type:"text",required:"",placeholder:"เกี่ยวกับเรา",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"},null,512),[[n,l(o).title]])]),t("div",null,[e[14]||(e[14]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," สถานะ ",-1)),r(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>l(o).is_active=s),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"},[...e[13]||(e[13]=[t("option",{value:!0},"ใช้งาน",-1),t("option",{value:!1},"ไม่ใช้งาน",-1)])],512),[[U,l(o).is_active]])]),t("div",null,[e[15]||(e[15]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," ลำดับการแสดงผล ",-1)),r(t("input",{"onUpdate:modelValue":e[3]||(e[3]=s=>l(o).display_order=s),type:"number",min:"0",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"},null,512),[[n,l(o).display_order,void 0,{number:!0}]])])]),t("div",null,[e[16]||(e[16]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," เนื้อหา ",-1)),g(E,{modelValue:l(o).content,"onUpdate:modelValue":e[4]||(e[4]=s=>l(o).content=s),"entity-type":"content-pages","entity-id":null,class:"w-full"},null,8,["modelValue"])]),t("div",D,[t("div",null,[e[17]||(e[17]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Meta Title ",-1)),r(t("input",{"onUpdate:modelValue":e[5]||(e[5]=s=>l(o).meta_title=s),type:"text",placeholder:"หน้าเว็บไซต์ - KDC Tutor School",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"},null,512),[[n,l(o).meta_title]]),e[18]||(e[18]=t("p",{class:"mt-1 text-sm text-gray-500"},"ใช้สำหรับ SEO (ถ้าไม่กรอกจะใช้ชื่อหน้า)",-1))]),t("div",null,[e[19]||(e[19]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Meta Keywords ",-1)),r(t("input",{"onUpdate:modelValue":e[6]||(e[6]=s=>l(o).meta_keywords=s),type:"text",placeholder:"keyword1, keyword2, keyword3",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"},null,512),[[n,l(o).meta_keywords]])])]),t("div",null,[e[20]||(e[20]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Meta Description ",-1)),r(t("textarea",{"onUpdate:modelValue":e[7]||(e[7]=s=>l(o).meta_description=s),rows:"3",placeholder:"คำอธิบายสั้นๆ สำหรับ SEO",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"},null,512),[[n,l(o).meta_description]])]),l(u)?(a(),d("div",R,v(l(u)),1)):c("",!0),t("div",j,[g(f,{to:"/admin/content/pages",class:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors"},{default:x(()=>[...e[21]||(e[21]=[b(" ยกเลิก ",-1)])]),_:1}),t("button",{type:"submit",disabled:l(i),class:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors"},[l(i)?(a(),d("span",q,"กำลังบันทึก...")):(a(),d("span",K,"บันทึก"))],8,O)])],32)])}}});export{z as default};
