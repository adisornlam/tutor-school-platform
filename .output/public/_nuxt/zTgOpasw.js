import{d as Ve,l as Ee,r as O,q as je,B as A,E as Ye,o as Ue,c as l,v as h,b as e,t as p,s as Y,x as D,g as G,y as N,e as t,L as et,J as W,F as T,i as B,K as ce,j as Oe,a,I as L,n as F,h as qe,f as Le,H as Pe}from"./B_rLn4hw.js";import{UserRole as ge}from"./LiZfZJ8V.js";import{a as ne,f as g}from"./BALXvQ8s.js";import{a as ie,h as Re,b as vt,t as X}from"./CiM0_A9B.js";import{c as gt,e as Te}from"./DDxt_u6O.js";import{i as he,p as le}from"./H1WKJ1ey.js";function P(C,V){const y=ie(C);return isNaN(V)?Re(C,NaN):(V&&y.setDate(y.getDate()+V),y)}function tt(C,V){const y=ie(C);if(isNaN(V))return Re(C,NaN);if(!V)return y;const E=y.getDate(),j=Re(C,y.getTime());j.setMonth(y.getMonth()+V+1,0);const H=j.getDate();return E>=H?j:(y.setFullYear(j.getFullYear(),j.getMonth(),E),y)}function st(C,V){const y=V*7;return P(C,y)}function mt(C,V){const y=ie(C.start),E=ie(C.end);let j=+y>+E;const H=j?+y:+E,z=j?E:y;z.setHours(0,0,0,0);let i=1;const I=[];for(;+z<=H;)I.push(ie(z)),z.setDate(z.getDate()+i),z.setHours(0,0,0,0);return j?I.reverse():I}function pe(C){const V=ie(C);return V.setDate(1),V.setHours(0,0,0,0),V}function J(C,V){const y=vt(),E=V?.weekStartsOn??V?.locale?.options?.weekStartsOn??y.weekStartsOn??y.locale?.options?.weekStartsOn??0,j=ie(C),H=j.getDay(),z=(H<E?-7:0)+6-(H-E);return j.setDate(j.getDate()+z),j.setHours(23,59,59,999),j}function xt(C,V){const y=ie(C),E=ie(V);return y.getFullYear()===E.getFullYear()&&y.getMonth()===E.getMonth()}function ft(C){return he(C,gt(C))}function bt(C,V){return tt(C,-1)}function _t(C,V){return st(C,-1)}const kt={class:"bg-white rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto"},ht={class:"flex items-center justify-between mb-6"},wt={class:"text-2xl font-bold"},Mt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Dt={class:"flex items-center space-x-2"},$t=["disabled"],Ct=["disabled"],St={class:"flex items-center space-x-2"},Tt=["onClick"],Bt={class:"border-t pt-4"},Vt={class:"flex items-center space-x-2 mb-4"},Et={key:0,class:"space-y-3 pl-6 border-l-2 border-gray-200"},jt={class:"space-y-2"},Ut={class:"flex items-center space-x-2"},Ot={key:0,class:"flex items-center space-x-2"},zt={key:1,class:"flex items-center space-x-2"},At={key:2,class:"ml-6 mt-2"},It=["value"],Ft={key:3,class:"flex items-center space-x-2"},Nt={key:4,class:"ml-6 mt-2"},Ht=["value"],Lt={key:5,class:"flex items-center space-x-2"},Pt={key:6,class:"flex items-center space-x-2"},qt={key:7,class:"ml-6 mt-2"},Rt=["value"],Yt={key:8,class:"flex items-center space-x-2"},Wt={key:9,class:"flex items-center space-x-2"},Zt={key:10,class:"ml-6 mt-2"},Jt=["value"],Kt={class:"flex items-center justify-end space-x-4 pt-4 border-t"},Xt=["disabled"],Gt={key:0},Qt={key:1},es=Ve({__name:"EventModal",props:{show:{type:Boolean},event:{},initialDate:{}},emits:["close","saved"],setup(C,{emit:V}){const y=C,E=V,j=Oe(),{accessToken:H,user:z}=Ee(),i=O(!1),I=O([]),r=je({title:"",description:"",startDate:"",startTime:"",endDate:"",endTime:"",is_all_day:!1,location:"",event_type:"personal",color:"#3B82F6",reminder_minutes:null,is_shared:!1,shared_scope:"public",shared_branch_id:null}),_=[{value:"#3B82F6",class:"blue-500",label:"ฟ้า"},{value:"#10B981",class:"green-500",label:"เขียว"},{value:"#F59E0B",class:"yellow-500",label:"เหลือง"},{value:"#EF4444",class:"red-500",label:"แดง"},{value:"#8B5CF6",class:"purple-500",label:"ม่วง"},{value:"#EC4899",class:"pink-500",label:"ชมพู"}],k=A(()=>z.value?.roles||[]),M=A(()=>k.value.includes(ge.SYSTEM_ADMIN)||k.value.includes(ge.OWNER)),v=A(()=>k.value.includes(ge.ADMIN)),b=A(()=>k.value.includes(ge.BRANCH_ADMIN)),f=A(()=>k.value.includes(ge.TUTOR)),w=A(()=>k.value.includes(ge.STUDENT)),x=A(()=>k.value.includes(ge.PARENT)),$=A(()=>M.value||v.value||b.value),q=A(()=>M.value||v.value||b.value),ae=A(()=>M.value||v.value),Q=A(()=>M.value||v.value||b.value),ee=A(()=>M.value||v.value||b.value||f.value),de=A(()=>M.value||v.value||b.value||f.value||w.value),te=A(()=>M.value||v.value||b.value||f.value),ue=A(()=>M.value||v.value||b.value||f.value||x.value),se=A(()=>M.value||v.value||b.value||f.value),R=async()=>{try{const U=await $fetch(`${j.public.apiBase}/admin/branches`,{headers:{Authorization:`Bearer ${H.value}`}});U.success&&(I.value=U.data.filter(d=>d.code!==null))}catch(U){console.error("Error loading branches:",U)}},we=()=>{if(y.event){const U=new Date(y.event.start_datetime),d=new Date(y.event.end_datetime);r.title=y.event.title,r.description=y.event.description||"",r.startDate=Z(U),r.startTime=me(U),r.endDate=Z(d),r.endTime=me(d),r.is_all_day=y.event.is_all_day,r.location=y.event.location||"",r.event_type=y.event.event_type,r.color=y.event.color,r.reminder_minutes=y.event.reminder_minutes,r.is_shared=y.event.is_shared,r.shared_scope=y.event.shared_scope,r.shared_branch_id=y.event.shared_branch_id}else{const U=y.initialDate||new Date;r.startDate=Z(U),r.startTime=me(U),r.endDate=Z(U),r.endTime=me(new Date(U.getTime()+3600*1e3)),r.is_all_day=!1,r.is_shared=!1,r.shared_scope="public",r.shared_branch_id=null}},Z=U=>U.toISOString().split("T")[0],me=U=>U.toTimeString().slice(0,5),Me=()=>{r.startDate&&r.endDate&&(r.startDate>r.endDate&&(r.endDate=r.startDate),r.startDate===r.endDate&&r.startTime&&r.endTime&&r.startTime>r.endTime&&(r.endTime=r.startTime))},Be=()=>{r.startDate&&r.endDate&&r.startDate>r.endDate&&(r.endDate=r.startDate)},ze=()=>{r.is_all_day&&(r.startTime="00:00",r.endTime="23:59")},Ae=async()=>{i.value=!0;try{const U=r.is_all_day?`${r.startDate}T00:00:00`:`${r.startDate}T${r.startTime}:00`,d=r.is_all_day?`${r.endDate}T23:59:59`:`${r.endDate}T${r.endTime}:00`,m={title:r.title,description:r.description||null,start_datetime:U,end_datetime:d,location:r.location||null,color:r.color,is_all_day:r.is_all_day,reminder_minutes:r.reminder_minutes,is_shared:r.is_shared,shared_scope:r.is_shared?r.shared_scope:"private",shared_branch_id:r.is_shared&&r.shared_scope.includes("branch")?r.shared_branch_id:null,event_type:r.event_type};let ye;y.event?ye=await $fetch(`${j.public.apiBase}/calendar/events/${y.event.id}`,{method:"PUT",headers:{Authorization:`Bearer ${H.value}`},body:m}):ye=await $fetch(`${j.public.apiBase}/calendar/events`,{method:"POST",headers:{Authorization:`Bearer ${H.value}`},body:m}),ye.success&&(E("saved",ye.data),E("close"))}catch(U){console.error("Error saving event:",U),alert(U.data?.message||"เกิดข้อผิดพลาดในการบันทึก Event")}finally{i.value=!1}};return Ye(()=>y.show,U=>{U&&(we(),(Q.value||ee.value||te.value||se.value)&&R())}),Ue(()=>{y.show&&(we(),(Q.value||ee.value||te.value||se.value)&&R())}),(U,d)=>C.show?(a(),l("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:d[25]||(d[25]=Y(m=>U.$emit("close"),["self"]))},[e("div",kt,[e("div",ht,[e("h2",wt,p(C.event?"แก้ไข Event":"สร้าง Event"),1),e("button",{onClick:d[0]||(d[0]=m=>U.$emit("close")),class:"text-gray-400 hover:text-gray-600"},[...d[26]||(d[26]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("form",{onSubmit:Y(Ae,["prevent"]),class:"space-y-4"},[e("div",null,[d[27]||(d[27]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[G(" ชื่อ Event "),e("span",{class:"text-red-500"},"*")],-1)),D(e("input",{"onUpdate:modelValue":d[1]||(d[1]=m=>t(r).title=m),type:"text",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"เช่น ประชุมทีม, วันหยุดส่วนตัว"},null,512),[[N,t(r).title]])]),e("div",null,[d[28]||(d[28]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," คำอธิบาย ",-1)),D(e("textarea",{"onUpdate:modelValue":d[2]||(d[2]=m=>t(r).description=m),rows:"3",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"รายละเอียดเพิ่มเติม"},null,512),[[N,t(r).description]])]),e("div",Mt,[e("div",null,[d[29]||(d[29]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[G(" เริ่มต้น "),e("span",{class:"text-red-500"},"*")],-1)),D(e("input",{"onUpdate:modelValue":d[3]||(d[3]=m=>t(r).startDate=m),type:"date",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",onChange:Me},null,544),[[N,t(r).startDate]]),t(r).is_all_day?h("",!0):D((a(),l("input",{key:0,"onUpdate:modelValue":d[4]||(d[4]=m=>t(r).startTime=m),type:"time",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 mt-2",onChange:Me},null,544)),[[N,t(r).startTime]])]),e("div",null,[d[30]||(d[30]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[G(" สิ้นสุด "),e("span",{class:"text-red-500"},"*")],-1)),D(e("input",{"onUpdate:modelValue":d[5]||(d[5]=m=>t(r).endDate=m),type:"date",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",onChange:Be},null,544),[[N,t(r).endDate]]),t(r).is_all_day?h("",!0):D((a(),l("input",{key:0,"onUpdate:modelValue":d[6]||(d[6]=m=>t(r).endTime=m),type:"time",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 mt-2",onChange:Be},null,544)),[[N,t(r).endTime]])])]),e("div",null,[e("label",Dt,[D(e("input",{"onUpdate:modelValue":d[7]||(d[7]=m=>t(r).is_all_day=m),type:"checkbox",class:"w-4 h-4 text-green-600 border-gray-300 rounded focus:ring-green-500",onChange:ze},null,544),[[et,t(r).is_all_day]]),d[31]||(d[31]=e("span",{class:"text-sm font-medium text-gray-700"},"ทั้งวัน",-1))])]),e("div",null,[d[32]||(d[32]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," สถานที่ ",-1)),D(e("input",{"onUpdate:modelValue":d[8]||(d[8]=m=>t(r).location=m),type:"text",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"เช่น ห้องประชุม, Zoom Meeting"},null,512),[[N,t(r).location]])]),e("div",null,[d[36]||(d[36]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," ประเภท Event ",-1)),D(e("select",{"onUpdate:modelValue":d[9]||(d[9]=m=>t(r).event_type=m),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"},[d[33]||(d[33]=e("option",{value:"personal"},"ส่วนตัว",-1)),d[34]||(d[34]=e("option",{value:"meeting"},"ประชุม",-1)),e("option",{value:"holiday",disabled:!t($)},"วันหยุด",8,$t),e("option",{value:"announcement",disabled:!t(q)},"ประกาศ",8,Ct),d[35]||(d[35]=e("option",{value:"other"},"อื่นๆ",-1))],512),[[W,t(r).event_type]])]),e("div",null,[d[37]||(d[37]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," สี Event ",-1)),e("div",St,[(a(),l(T,null,B(_,m=>e("button",{key:m.value,type:"button",onClick:ye=>t(r).color=m.value,class:F(["w-10 h-10 rounded-lg border-2 transition-all",[t(r).color===m.value?"border-gray-800 scale-110":"border-gray-300",`bg-${m.class}`]]),style:L({backgroundColor:m.value})},null,14,Tt)),64))])]),e("div",null,[d[39]||(d[39]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," แจ้งเตือน ",-1)),D(e("select",{"onUpdate:modelValue":d[10]||(d[10]=m=>t(r).reminder_minutes=m),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"},[...d[38]||(d[38]=[e("option",{value:null},"ไม่แจ้งเตือน",-1),e("option",{value:15},"15 นาทีก่อน",-1),e("option",{value:30},"30 นาทีก่อน",-1),e("option",{value:60},"1 ชั่วโมงก่อน",-1),e("option",{value:1440},"1 วันก่อน",-1),e("option",{value:2880},"2 วันก่อน",-1)])],512),[[W,t(r).reminder_minutes]])]),e("div",Bt,[e("label",Vt,[D(e("input",{"onUpdate:modelValue":d[11]||(d[11]=m=>t(r).is_shared=m),type:"checkbox",class:"w-4 h-4 text-green-600 border-gray-300 rounded focus:ring-green-500"},null,512),[[et,t(r).is_shared]]),d[40]||(d[40]=e("span",{class:"text-sm font-medium text-gray-700"},"แชร์ Event",-1))]),t(r).is_shared?(a(),l("div",Et,[e("div",null,[d[53]||(d[53]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," แชร์ให้ ",-1)),e("div",jt,[e("label",Ut,[D(e("input",{"onUpdate:modelValue":d[12]||(d[12]=m=>t(r).shared_scope=m),type:"radio",value:"public",class:"w-4 h-4 text-green-600 border-gray-300 focus:ring-green-500"},null,512),[[ce,t(r).shared_scope]]),d[41]||(d[41]=e("span",{class:"text-sm text-gray-700"},"ทุกคน (Public)",-1))]),t(ae)?(a(),l("label",Ot,[D(e("input",{"onUpdate:modelValue":d[13]||(d[13]=m=>t(r).shared_scope=m),type:"radio",value:"admins",class:"w-4 h-4 text-green-600 border-gray-300 focus:ring-green-500"},null,512),[[ce,t(r).shared_scope]]),d[42]||(d[42]=e("span",{class:"text-sm text-gray-700"},"ผู้ดูแลระบบ (Admins)",-1))])):h("",!0),t(Q)?(a(),l("label",zt,[D(e("input",{"onUpdate:modelValue":d[14]||(d[14]=m=>t(r).shared_scope=m),type:"radio",value:"branch_admins",class:"w-4 h-4 text-green-600 border-gray-300 focus:ring-green-500"},null,512),[[ce,t(r).shared_scope]]),d[43]||(d[43]=e("span",{class:"text-sm text-gray-700"},"ผู้ดูแลสาขา (Branch Admins)",-1))])):h("",!0),t(r).shared_scope==="branch_admins"&&t(I).length>0?(a(),l("div",At,[D(e("select",{"onUpdate:modelValue":d[15]||(d[15]=m=>t(r).shared_branch_id=m),class:"w-full px-3 py-1 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"},[d[44]||(d[44]=e("option",{value:null},"ทุกสาขา",-1)),(a(!0),l(T,null,B(t(I),m=>(a(),l("option",{key:m.id,value:m.id},p(m.name),9,It))),128))],512),[[W,t(r).shared_branch_id]])])):h("",!0),t(ee)?(a(),l("label",Ft,[D(e("input",{"onUpdate:modelValue":d[16]||(d[16]=m=>t(r).shared_scope=m),type:"radio",value:"tutors",class:"w-4 h-4 text-green-600 border-gray-300 focus:ring-green-500"},null,512),[[ce,t(r).shared_scope]]),d[45]||(d[45]=e("span",{class:"text-sm text-gray-700"},"ครูทุกคน (Tutors)",-1))])):h("",!0),t(r).shared_scope==="tutors"&&t(I).length>0?(a(),l("div",Nt,[D(e("select",{"onUpdate:modelValue":d[17]||(d[17]=m=>t(r).shared_branch_id=m),class:"w-full px-3 py-1 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"},[d[46]||(d[46]=e("option",{value:null},"ทุกสาขา",-1)),(a(!0),l(T,null,B(t(I),m=>(a(),l("option",{key:m.id,value:m.id},p(m.name),9,Ht))),128))],512),[[W,t(r).shared_branch_id]])])):h("",!0),t(de)?(a(),l("label",Lt,[D(e("input",{"onUpdate:modelValue":d[18]||(d[18]=m=>t(r).shared_scope=m),type:"radio",value:"students",class:"w-4 h-4 text-green-600 border-gray-300 focus:ring-green-500"},null,512),[[ce,t(r).shared_scope]]),d[47]||(d[47]=e("span",{class:"text-sm text-gray-700"},"นักเรียนทุกคน (Students)",-1))])):h("",!0),t(te)?(a(),l("label",Pt,[D(e("input",{"onUpdate:modelValue":d[19]||(d[19]=m=>t(r).shared_scope=m),type:"radio",value:"branch_students",class:"w-4 h-4 text-green-600 border-gray-300 focus:ring-green-500"},null,512),[[ce,t(r).shared_scope]]),d[48]||(d[48]=e("span",{class:"text-sm text-gray-700"},"นักเรียนในสาขา (Branch Students)",-1))])):h("",!0),t(r).shared_scope==="branch_students"&&t(I).length>0?(a(),l("div",qt,[D(e("select",{"onUpdate:modelValue":d[20]||(d[20]=m=>t(r).shared_branch_id=m),required:"",class:"w-full px-3 py-1 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"},[d[49]||(d[49]=e("option",{value:""},"เลือกสาขา",-1)),(a(!0),l(T,null,B(t(I),m=>(a(),l("option",{key:m.id,value:m.id},p(m.name),9,Rt))),128))],512),[[W,t(r).shared_branch_id]])])):h("",!0),t(ue)?(a(),l("label",Yt,[D(e("input",{"onUpdate:modelValue":d[21]||(d[21]=m=>t(r).shared_scope=m),type:"radio",value:"parents",class:"w-4 h-4 text-green-600 border-gray-300 focus:ring-green-500"},null,512),[[ce,t(r).shared_scope]]),d[50]||(d[50]=e("span",{class:"text-sm text-gray-700"},"ผู้ปกครองทุกคน (Parents)",-1))])):h("",!0),t(se)?(a(),l("label",Wt,[D(e("input",{"onUpdate:modelValue":d[22]||(d[22]=m=>t(r).shared_scope=m),type:"radio",value:"branch_parents",class:"w-4 h-4 text-green-600 border-gray-300 focus:ring-green-500"},null,512),[[ce,t(r).shared_scope]]),d[51]||(d[51]=e("span",{class:"text-sm text-gray-700"},"ผู้ปกครองในสาขา (Branch Parents)",-1))])):h("",!0),t(r).shared_scope==="branch_parents"&&t(I).length>0?(a(),l("div",Zt,[D(e("select",{"onUpdate:modelValue":d[23]||(d[23]=m=>t(r).shared_branch_id=m),required:"",class:"w-full px-3 py-1 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"},[d[52]||(d[52]=e("option",{value:""},"เลือกสาขา",-1)),(a(!0),l(T,null,B(t(I),m=>(a(),l("option",{key:m.id,value:m.id},p(m.name),9,Jt))),128))],512),[[W,t(r).shared_branch_id]])])):h("",!0)])])])):h("",!0)]),e("div",Kt,[e("button",{type:"button",onClick:d[24]||(d[24]=m=>U.$emit("close")),class:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 text-gray-700"}," ยกเลิก "),e("button",{type:"submit",disabled:t(i),class:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed"},[t(i)?(a(),l("span",Gt,"กำลังบันทึก...")):(a(),l("span",Qt,"บันทึก"))],8,Xt)])],32)])])):h("",!0)}}),ts=Object.assign(es,{__name:"EventModal"}),ss={class:"bg-white rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto"},os={class:"flex items-center justify-between mb-6"},ns={class:"text-2xl font-bold"},ls={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},as={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},rs={class:"flex items-center space-x-2"},is=["onClick"],ds={class:"flex items-center justify-end space-x-4 pt-4 border-t"},us=["disabled"],cs={key:0},ps={key:1},ys=Ve({__name:"TaskModal",props:{show:{type:Boolean},task:{},initialDate:{}},emits:["close","saved"],setup(C,{emit:V}){const y=C,E=V,j=Oe(),{accessToken:H}=Ee(),z=O(!1),i=je({title:"",description:"",start_date:"",due_date:"",priority:"medium",status:"not_started",color:"#10B981",category:""}),I=[{value:"#10B981",class:"green-500",label:"เขียว"},{value:"#3B82F6",class:"blue-500",label:"ฟ้า"},{value:"#F59E0B",class:"yellow-500",label:"เหลือง"},{value:"#EF4444",class:"red-500",label:"แดง"},{value:"#8B5CF6",class:"purple-500",label:"ม่วง"},{value:"#EC4899",class:"pink-500",label:"ชมพู"}],r=M=>M?(typeof M=="string"?new Date(M):M).toISOString().split("T")[0]:"",_=()=>{y.task?(i.title=y.task.title,i.description=y.task.description||"",i.start_date=r(y.task.start_date),i.due_date=r(y.task.due_date),i.priority=y.task.priority,i.status=y.task.status,i.color=y.task.color,i.category=y.task.category||""):(i.title="",i.description="",y.initialDate?(i.start_date=r(y.initialDate),i.due_date=r(y.initialDate)):(i.start_date="",i.due_date=""),i.priority="medium",i.status="not_started",i.color="#10B981",i.category="")},k=async()=>{z.value=!0;try{const M={title:i.title,description:i.description||null,due_date:i.due_date||null,start_date:i.start_date||null,priority:i.priority,status:i.status,color:i.color,category:i.category||null};let v;y.task?v=await $fetch(`${j.public.apiBase}/calendar/tasks/${y.task.id}`,{method:"PUT",headers:{Authorization:`Bearer ${H.value}`},body:M}):v=await $fetch(`${j.public.apiBase}/calendar/tasks`,{method:"POST",headers:{Authorization:`Bearer ${H.value}`},body:M}),v.success&&(E("saved",v.data),E("close"))}catch(M){console.error("Error saving task:",M),alert(M.data?.message||"เกิดข้อผิดพลาดในการบันทึกงาน")}finally{z.value=!1}};return Ye(()=>y.show,M=>{M&&_()}),Ue(()=>{y.show&&_()}),(M,v)=>C.show?(a(),l("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:v[9]||(v[9]=Y(b=>M.$emit("close"),["self"]))},[e("div",ss,[e("div",os,[e("h2",ns,p(C.task?"แก้ไขงาน":"สร้างงาน"),1),e("button",{onClick:v[0]||(v[0]=b=>M.$emit("close")),class:"text-gray-400 hover:text-gray-600"},[...v[10]||(v[10]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("form",{onSubmit:Y(k,["prevent"]),class:"space-y-4"},[e("div",null,[v[11]||(v[11]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[G(" ชื่องาน "),e("span",{class:"text-red-500"},"*")],-1)),D(e("input",{"onUpdate:modelValue":v[1]||(v[1]=b=>t(i).title=b),type:"text",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"เช่น จัดทำรายงาน, ตรวจสอบงานนักเรียน"},null,512),[[N,t(i).title]])]),e("div",null,[v[12]||(v[12]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," คำอธิบาย ",-1)),D(e("textarea",{"onUpdate:modelValue":v[2]||(v[2]=b=>t(i).description=b),rows:"3",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"รายละเอียดเพิ่มเติม"},null,512),[[N,t(i).description]])]),e("div",ls,[e("div",null,[v[13]||(v[13]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," วันที่เริ่มต้น ",-1)),D(e("input",{"onUpdate:modelValue":v[3]||(v[3]=b=>t(i).start_date=b),type:"date",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"},null,512),[[N,t(i).start_date]])]),e("div",null,[v[14]||(v[14]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," วันครบกำหนด ",-1)),D(e("input",{"onUpdate:modelValue":v[4]||(v[4]=b=>t(i).due_date=b),type:"date",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"},null,512),[[N,t(i).due_date]])])]),e("div",as,[e("div",null,[v[16]||(v[16]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," ลำดับความสำคัญ ",-1)),D(e("select",{"onUpdate:modelValue":v[5]||(v[5]=b=>t(i).priority=b),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"},[...v[15]||(v[15]=[e("option",{value:"low"},"ต่ำ",-1),e("option",{value:"medium"},"ปานกลาง",-1),e("option",{value:"high"},"สูง",-1),e("option",{value:"urgent"},"ด่วน",-1)])],512),[[W,t(i).priority]])]),e("div",null,[v[18]||(v[18]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," สถานะ ",-1)),D(e("select",{"onUpdate:modelValue":v[6]||(v[6]=b=>t(i).status=b),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"},[...v[17]||(v[17]=[e("option",{value:"not_started"},"ยังไม่เริ่ม",-1),e("option",{value:"in_progress"},"กำลังทำ",-1),e("option",{value:"completed"},"เสร็จสิ้น",-1),e("option",{value:"cancelled"},"ยกเลิก",-1)])],512),[[W,t(i).status]])])]),e("div",null,[v[19]||(v[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," หมวดหมู่ ",-1)),D(e("input",{"onUpdate:modelValue":v[7]||(v[7]=b=>t(i).category=b),type:"text",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"เช่น การบ้าน, รายงาน, อื่นๆ"},null,512),[[N,t(i).category]])]),e("div",null,[v[20]||(v[20]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," สีงาน ",-1)),e("div",rs,[(a(),l(T,null,B(I,b=>e("button",{key:b.value,type:"button",onClick:f=>t(i).color=b.value,class:F(["w-10 h-10 rounded-lg border-2 transition-all",[t(i).color===b.value?"border-gray-800 scale-110":"border-gray-300",`bg-${b.class}`]]),style:L({backgroundColor:b.value})},null,14,is)),64))])]),e("div",ds,[e("button",{type:"button",onClick:v[8]||(v[8]=b=>M.$emit("close")),class:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 text-gray-700"}," ยกเลิก "),e("button",{type:"submit",disabled:t(z),class:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed"},[t(z)?(a(),l("span",cs,"กำลังบันทึก...")):(a(),l("span",ps,"บันทึก"))],8,us)])],32)])])):h("",!0)}}),vs=Object.assign(ys,{__name:"TaskModal"}),gs={class:"bg-white rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto"},ms={class:"flex items-center justify-between mb-6"},xs={class:"text-2xl font-bold"},fs={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},bs={class:"flex items-center space-x-2"},_s=["onClick"],ks={class:"border-t pt-4"},hs={class:"flex items-center justify-end space-x-4 pt-4 border-t"},ws=["disabled"],Ms={key:0},Ds={key:1},$s=Ve({__name:"AppointmentModal",props:{show:{type:Boolean},appointment:{}},emits:["close","saved"],setup(C,{emit:V}){const y=C,E=V,j=Oe(),{accessToken:H}=Ee(),z=O(!1),i=je({title:"",description:"",startDate:"",startTime:"",endDate:"",endTime:"",appointment_type:"student",location:"",meeting_link:"",status:"scheduled",color:"#3B82F6",reminder_minutes:null,participant_user_ids_input:"",participant_user_ids:[]}),I=[{value:"#3B82F6",class:"blue-500",label:"ฟ้า"},{value:"#10B981",class:"green-500",label:"เขียว"},{value:"#F59E0B",class:"yellow-500",label:"เหลือง"},{value:"#EF4444",class:"red-500",label:"แดง"},{value:"#8B5CF6",class:"purple-500",label:"ม่วง"},{value:"#EC4899",class:"pink-500",label:"ชมพู"}],r=w=>(typeof w=="string"?new Date(w):w).toISOString().split("T")[0],_=w=>(typeof w=="string"?new Date(w):w).toTimeString().slice(0,5),k=()=>{if(!i.participant_user_ids_input){i.participant_user_ids=[];return}i.participant_user_ids=i.participant_user_ids_input.split(",").map(w=>parseInt(w.trim())).filter(w=>!isNaN(w)&&w>0)},M=()=>{i.startDate&&i.endDate&&i.startDate>i.endDate&&(i.endDate=i.startDate),i.startDate===i.endDate&&i.startTime&&i.endTime&&i.startTime>i.endTime&&(i.endTime=i.startTime)},v=()=>{i.startDate&&i.endDate&&i.startDate>i.endDate&&(i.endDate=i.startDate)},b=()=>{if(y.appointment){const w=new Date(y.appointment.start_datetime),x=new Date(y.appointment.end_datetime);i.title=y.appointment.title,i.description=y.appointment.description||"",i.startDate=r(w),i.startTime=_(w),i.endDate=r(x),i.endTime=_(x),i.appointment_type=y.appointment.appointment_type,i.location=y.appointment.location||"",i.meeting_link=y.appointment.meeting_link||"",i.status=y.appointment.status,i.color=y.appointment.color,i.reminder_minutes=y.appointment.reminder_minutes,i.participant_user_ids=y.appointment.participants?.map($=>$.user_id)||[],i.participant_user_ids_input=i.participant_user_ids.join(",")}else{const w=y.initialDate||new Date;i.startDate=r(w),i.startTime=_(w),i.endDate=r(w),i.endTime=_(new Date(w.getTime()+3600*1e3)),i.appointment_type="student",i.status="scheduled",i.participant_user_ids=[],i.participant_user_ids_input=""}},f=async()=>{z.value=!0;try{k();const w=`${i.startDate}T${i.startTime}:00`,x=`${i.endDate}T${i.endTime}:00`,$={title:i.title,description:i.description||null,start_datetime:w,end_datetime:x,appointment_type:i.appointment_type,location:i.location||null,meeting_link:i.meeting_link||null,status:i.status,color:i.color,reminder_minutes:i.reminder_minutes,participant_user_ids:i.participant_user_ids};let q;y.appointment?q=await $fetch(`${j.public.apiBase}/calendar/appointments/${y.appointment.id}`,{method:"PUT",headers:{Authorization:`Bearer ${H.value}`},body:$}):q=await $fetch(`${j.public.apiBase}/calendar/appointments`,{method:"POST",headers:{Authorization:`Bearer ${H.value}`},body:$}),q.success&&(E("saved",q.data),E("close"))}catch(w){console.error("Error saving appointment:",w),alert(w.data?.message||"เกิดข้อผิดพลาดในการบันทึกการนัดหมาย")}finally{z.value=!1}};return Ye(()=>y.show,w=>{w&&b()}),Ue(()=>{y.show&&b()}),(w,x)=>C.show?(a(),l("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:x[14]||(x[14]=Y($=>w.$emit("close"),["self"]))},[e("div",gs,[e("div",ms,[e("h2",xs,p(C.appointment?"แก้ไขการนัดหมาย":"สร้างการนัดหมาย"),1),e("button",{onClick:x[0]||(x[0]=$=>w.$emit("close")),class:"text-gray-400 hover:text-gray-600"},[...x[15]||(x[15]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("form",{onSubmit:Y(f,["prevent"]),class:"space-y-4"},[e("div",null,[x[16]||(x[16]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[G(" หัวข้อ "),e("span",{class:"text-red-500"},"*")],-1)),D(e("input",{"onUpdate:modelValue":x[1]||(x[1]=$=>t(i).title=$),type:"text",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"เช่น นัดหมายนักเรียน, ประชุมทีม"},null,512),[[N,t(i).title]])]),e("div",null,[x[17]||(x[17]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," คำอธิบาย ",-1)),D(e("textarea",{"onUpdate:modelValue":x[2]||(x[2]=$=>t(i).description=$),rows:"3",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"รายละเอียดเพิ่มเติม"},null,512),[[N,t(i).description]])]),e("div",fs,[e("div",null,[x[18]||(x[18]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[G(" เริ่มต้น "),e("span",{class:"text-red-500"},"*")],-1)),D(e("input",{"onUpdate:modelValue":x[3]||(x[3]=$=>t(i).startDate=$),type:"date",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",onChange:M},null,544),[[N,t(i).startDate]]),D(e("input",{"onUpdate:modelValue":x[4]||(x[4]=$=>t(i).startTime=$),type:"time",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 mt-2",onChange:M},null,544),[[N,t(i).startTime]])]),e("div",null,[x[19]||(x[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[G(" สิ้นสุด "),e("span",{class:"text-red-500"},"*")],-1)),D(e("input",{"onUpdate:modelValue":x[5]||(x[5]=$=>t(i).endDate=$),type:"date",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",onChange:v},null,544),[[N,t(i).endDate]]),D(e("input",{"onUpdate:modelValue":x[6]||(x[6]=$=>t(i).endTime=$),type:"time",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 mt-2",onChange:v},null,544),[[N,t(i).endTime]])])]),e("div",null,[x[21]||(x[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," ประเภทการนัดหมาย ",-1)),D(e("select",{"onUpdate:modelValue":x[7]||(x[7]=$=>t(i).appointment_type=$),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"},[...x[20]||(x[20]=[qe('<option value="student">นัดหมายนักเรียน</option><option value="meeting">ประชุม</option><option value="parent">นัดหมายผู้ปกครอง</option><option value="staff">นัดหมายเจ้าหน้าที่</option><option value="other">อื่นๆ</option>',5)])],512),[[W,t(i).appointment_type]])]),e("div",null,[x[22]||(x[22]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," สถานที่ ",-1)),D(e("input",{"onUpdate:modelValue":x[8]||(x[8]=$=>t(i).location=$),type:"text",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"เช่น ห้องประชุม, Zoom Meeting"},null,512),[[N,t(i).location]])]),e("div",null,[x[23]||(x[23]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," ลิงก์ประชุม ",-1)),D(e("input",{"onUpdate:modelValue":x[9]||(x[9]=$=>t(i).meeting_link=$),type:"url",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"https://zoom.us/j/..."},null,512),[[N,t(i).meeting_link]])]),e("div",null,[x[25]||(x[25]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," สถานะ ",-1)),D(e("select",{"onUpdate:modelValue":x[10]||(x[10]=$=>t(i).status=$),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"},[...x[24]||(x[24]=[e("option",{value:"scheduled"},"จองแล้ว",-1),e("option",{value:"confirmed"},"ยืนยันแล้ว",-1),e("option",{value:"cancelled"},"ยกเลิก",-1),e("option",{value:"completed"},"เสร็จสิ้น",-1)])],512),[[W,t(i).status]])]),e("div",null,[x[26]||(x[26]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," สีการนัดหมาย ",-1)),e("div",bs,[(a(),l(T,null,B(I,$=>e("button",{key:$.value,type:"button",onClick:q=>t(i).color=$.value,class:F(["w-10 h-10 rounded-lg border-2 transition-all",[t(i).color===$.value?"border-gray-800 scale-110":"border-gray-300",`bg-${$.class}`]]),style:L({backgroundColor:$.value})},null,14,_s)),64))])]),e("div",null,[x[28]||(x[28]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," แจ้งเตือน ",-1)),D(e("select",{"onUpdate:modelValue":x[11]||(x[11]=$=>t(i).reminder_minutes=$),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"},[...x[27]||(x[27]=[e("option",{value:null},"ไม่แจ้งเตือน",-1),e("option",{value:15},"15 นาทีก่อน",-1),e("option",{value:30},"30 นาทีก่อน",-1),e("option",{value:60},"1 ชั่วโมงก่อน",-1),e("option",{value:1440},"1 วันก่อน",-1)])],512),[[W,t(i).reminder_minutes]])]),e("div",ks,[x[29]||(x[29]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," ผู้เข้าร่วม (User IDs - คั่นด้วย comma) ",-1)),D(e("input",{"onUpdate:modelValue":x[12]||(x[12]=$=>t(i).participant_user_ids_input=$),type:"text",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"เช่น 1,2,3 (User IDs)",onBlur:k},null,544),[[N,t(i).participant_user_ids_input]]),x[30]||(x[30]=e("p",{class:"text-xs text-gray-500 mt-1"},"กรุณาระบุ User IDs คั่นด้วย comma (จะพัฒนาระบบค้นหาผู้ใช้ในอนาคต)",-1))]),e("div",hs,[e("button",{type:"button",onClick:x[13]||(x[13]=$=>w.$emit("close")),class:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 text-gray-700"}," ยกเลิก "),e("button",{type:"submit",disabled:t(z),class:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed"},[t(z)?(a(),l("span",Ms,"กำลังบันทึก...")):(a(),l("span",Ds,"บันทึก"))],8,ws)])],32)])])):h("",!0)}}),Cs=Object.assign($s,{__name:"AppointmentModal"}),Ss={class:"flex items-center justify-between mb-6"},Ts={class:"flex items-center space-x-4"},Bs={class:"py-1"},Vs=["onClick"],Es={class:"text-gray-400 text-sm"},js={key:0,class:"flex items-center space-x-2"},Us={key:1,class:"text-lg font-semibold text-gray-700"},Os={class:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6"},zs={class:"bg-white rounded-lg shadow p-4"},As={class:"flex items-center justify-between"},Is={class:"text-2xl font-bold text-gray-900"},Fs={class:"bg-white rounded-lg shadow p-4"},Ns={class:"flex items-center justify-between"},Hs={class:"text-2xl font-bold text-gray-900"},Ls={class:"bg-white rounded-lg shadow p-4"},Ps={class:"flex items-center justify-between"},qs={class:"text-2xl font-bold text-orange-600"},Rs={class:"bg-white rounded-lg shadow p-4"},Ys={class:"flex items-center justify-between"},Ws={class:"text-2xl font-bold text-green-600"},Zs={class:"bg-white rounded-lg shadow p-4 mb-6"},Js={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},Ks={key:0},Xs={key:1},Gs=["value"],Qs={key:0,class:"bg-white rounded-lg shadow p-6"},eo={key:0,class:"p-8 text-center"},to={key:1,class:"p-4 bg-red-50 border border-red-200 text-red-700 rounded"},so={key:2},oo={class:"space-y-4"},no=["onClick"],lo={class:"flex items-start justify-between"},ao={class:"flex-1"},ro={class:"flex items-center space-x-2 mb-2"},io={class:"text-lg font-semibold text-gray-900"},uo={key:0,class:"px-2 py-1 text-xs font-medium rounded bg-blue-100 text-blue-700"},co={class:"text-sm text-gray-600 mb-2"},po={key:0},yo={key:1,class:"mt-1 text-gray-500"},vo=["onClick"],go={class:"flex items-start justify-between"},mo={class:"flex-1"},xo={class:"flex items-center space-x-2 mb-2"},fo={key:0,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},bo={key:1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"},_o={key:0,class:"px-2 py-1 text-xs font-medium rounded bg-gray-100 text-gray-700"},ko={class:"text-sm text-gray-600 mb-2"},ho={key:0},wo={key:1,class:"capitalize"},Mo={key:2,class:"mt-1 text-gray-500"},Do=["onClick"],$o={class:"flex items-start justify-between"},Co={class:"flex-1"},So={class:"flex items-center space-x-2 mb-2"},To={class:"text-lg font-semibold text-gray-900"},Bo={key:0,class:"px-2 py-1 text-xs font-medium rounded bg-green-100 text-green-700"},Vo={class:"text-sm text-gray-600 mb-2"},Eo={key:0},jo={key:1},Uo={key:2,class:"mt-1 text-gray-500"},Oo={class:"flex items-start justify-between"},zo={class:"flex-1"},Ao={class:"flex items-center space-x-2 mb-2"},Io={class:"text-lg font-semibold text-gray-900"},Fo={class:"text-sm text-gray-600 mb-2"},No={class:"flex items-center space-x-2"},Ho=["href"],Lo=["href"],Po={key:0,class:"text-center py-12 text-gray-500"},qo={key:1,class:"bg-white rounded-lg shadow p-6"},Ro={key:0,class:"p-8 text-center"},Yo={key:1,class:"p-4 bg-red-50 border border-red-200 text-red-700 rounded"},Wo={key:2},Zo={class:"grid grid-cols-7 gap-2"},Jo={class:"text-sm"},Ko={class:"flex items-center justify-between mb-2"},Xo={class:"text-xs font-medium text-gray-600"},Go=["onClick","title"],Qo=["onClick"],en=["onClick"],tn=["onClick"],sn={class:"space-y-1"},on=["onClick"],nn={class:"font-medium truncate text-gray-900"},ln={class:"text-xs opacity-75 text-gray-600"},an=["onClick"],rn={key:0,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},dn={key:1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"},un=["onClick"],cn={class:"font-medium truncate text-gray-900"},pn={class:"text-xs opacity-75 text-gray-600"},yn=["onClick"],vn={class:"font-medium truncate"},gn={class:"text-xs opacity-75"},mn={key:2,class:"bg-white rounded-lg shadow p-6"},xn={key:0,class:"p-8 text-center"},fn={key:1,class:"p-4 bg-red-50 border border-red-200 text-red-700 rounded"},bn={key:2},_n={class:"grid grid-cols-7 gap-1 mb-2"},kn={class:"text-sm"},hn={class:"grid grid-cols-7 gap-1"},wn={class:"text-xs font-medium text-gray-600 mb-1"},Mn={class:"space-y-0.5"},Dn=["title","onClick"],$n=["title","onClick"],Cn=["title","onClick"],Sn=["title"],Tn={key:3,class:"bg-white rounded-lg shadow p-6"},Bn={key:0,class:"p-8 text-center"},Vn={key:1,class:"p-4 bg-red-50 border border-red-200 text-red-700 rounded"},En={key:2},jn={class:"grid grid-cols-4 gap-4"},Un={class:"font-semibold text-gray-700 mb-3"},On={class:"text-sm"},zn={class:"text-xs text-gray-500"},An={class:"space-y-2"},In=["onClick"],Fn={class:"font-medium truncate text-gray-900"},Nn={class:"text-xs opacity-75 text-gray-600"},Hn=["onClick"],Ln={key:0,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},Pn={key:1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"},qn=["onClick"],Rn={class:"font-medium truncate text-gray-900"},Yn={class:"text-xs opacity-75 text-gray-600"},Wn={class:"font-medium truncate"},Zn={class:"text-xs opacity-75"},Jn={key:0,class:"text-xs text-gray-400 text-center py-4"},Kn={key:4,class:"bg-white rounded-lg shadow overflow-hidden"},Xn={key:0,class:"p-8 text-center"},Gn={key:1,class:"p-4 bg-red-50 border border-red-200 text-red-700 rounded m-4"},Qn={key:2,class:"p-8 text-center text-gray-500"},el={key:3,class:"space-y-4"},tl={key:0},sl={class:"divide-y divide-gray-200"},ol=["onClick"],nl={class:"flex items-center justify-between"},ll={class:"flex-1"},al={class:"flex items-center space-x-2"},rl={class:"text-sm font-medium text-gray-900"},il={key:0,class:"px-2 py-1 text-xs font-medium rounded bg-blue-100 text-blue-700"},dl={class:"mt-1 text-sm text-gray-500"},ul={key:0,class:"ml-2"},cl={key:0,class:"mt-1 text-sm text-gray-600"},pl={key:1},yl={class:"divide-y divide-gray-200"},vl=["onClick"],gl={class:"flex items-center justify-between"},ml={class:"flex-1"},xl={class:"flex items-center space-x-2"},fl={key:0,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},bl={key:1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"},_l={class:"mt-1 text-sm text-gray-500"},kl={key:0},hl={key:1,class:"ml-2 capitalize"},wl={key:0,class:"mt-1 text-sm text-gray-600"},Ml={key:2},Dl={class:"divide-y divide-gray-200"},$l=["onClick"],Cl={class:"flex items-center justify-between"},Sl={class:"flex-1"},Tl={class:"flex items-center space-x-2"},Bl={class:"text-sm font-medium text-gray-900"},Vl={key:0,class:"px-2 py-1 text-xs font-medium rounded bg-green-100 text-green-700"},El={class:"mt-1 text-sm text-gray-500"},jl={key:0,class:"ml-2"},Ul={key:1,class:"ml-2"},Ol={key:0,class:"mt-1 text-sm text-gray-600"},zl={key:3},Al={class:"min-w-full divide-y divide-gray-200"},Il={class:"bg-white divide-y divide-gray-200"},Fl={class:"px-6 py-4 whitespace-nowrap"},Nl={class:"text-sm font-medium text-gray-900"},Hl={class:"text-xs text-gray-500"},Ll={class:"px-6 py-4"},Pl={class:"text-sm font-medium text-gray-900"},ql={key:0,class:"text-xs text-gray-500"},Rl={class:"px-6 py-4 whitespace-nowrap"},Yl={class:"text-sm text-gray-900"},Wl={key:0,class:"text-xs text-gray-500"},Zl={class:"px-6 py-4 whitespace-nowrap"},Jl={class:"px-6 py-4 whitespace-nowrap"},Kl={class:"px-6 py-4 whitespace-nowrap"},Xl={key:0,class:"flex items-center space-x-2"},Gl=["href"],Ql={key:1,class:"flex items-center space-x-2"},ea=["href"],ta={key:2,class:"text-xs text-gray-400"},ia=Ve({__name:"index",setup(C){const V=Oe(),{accessToken:y}=Ee(),E=O([]),j=O([]),H=O([]),z=O([]),i=O([]),I=O(!0),r=O(""),_=O("month"),k=O("month"),M=O(""),v=O(""),b=O(ne(new Date,{weekStartsOn:1})),f=O(new Date),w=O(pe(new Date)),x=O(null),$=O(!1),q=O(!1),ae=O({}),Q=O(!1),ee=O(!1),de=O(!1),te=O(null),ue=O(null),se=O(null),R=O(null),we=[{value:"day",label:"วัน",shortcut:"D"},{value:"week",label:"สัปดาห์",shortcut:"W"},{value:"month",label:"เดือน",shortcut:"M"},{value:"agenda",label:"กำหนดการ",shortcut:"A"},{value:"4days",label:"4 วัน",shortcut:"X"}],Z=je({status:"",courseId:""}),me=A(()=>we.find(n=>n.value===_.value)?.label||"สัปดาห์"),Me=A(()=>["day","week","month","4days"].includes(_.value)),Be=A(()=>{if(_.value==="day")return g(f.value,"dd MMMM yyyy",{locale:X});if(_.value==="week")return pt(b.value);if(_.value==="month")return g(w.value,"MMMM yyyy",{locale:X});if(_.value==="4days"){const o=P(f.value,3);return`${g(f.value,"dd MMM",{locale:X})} - ${g(o,"dd MMM yyyy",{locale:X})}`}return""}),ze=A(()=>{const o=[],n=["จันทร์","อังคาร","พุธ","พฤหัสบดี"];for(let u=0;u<4;u++){const S=P(f.value,u);o.push({key:u,label:n[u]||g(S,"EEEE",{locale:X}),date:S})}return o}),Ae=A(()=>{const o=ne(pe(w.value),{weekStartsOn:1}),n=J(Te(w.value),{weekStartsOn:1});return mt({start:o,end:n}).map((S,K)=>({key:K,date:S}))}),U=A(()=>{const o=new Date().toISOString().split("T")[0];return E.value.filter(n=>n.start_datetime.startsWith(o)&&n.status!=="cancelled").length}),d=A(()=>{const o=ne(new Date,{weekStartsOn:1}),n=J(new Date,{weekStartsOn:1});return E.value.filter(u=>{const S=le(u.start_datetime);return S>=o&&S<=n&&u.status!=="cancelled"}).length}),m=A(()=>E.value.filter(o=>o.status==="ongoing").length),ye=A(()=>E.value.filter(o=>o.status==="completed").length),Ie=A(()=>{const o=[];for(let n=0;n<7;n++){const u=P(b.value,n),S=["จันทร์","อังคาร","พุธ","พฤหัสบดี","ศุกร์","เสาร์","อาทิตย์"];o.push({key:n,label:S[n],date:u})}return o}),ot=async()=>{try{const o=await $fetch(`${V.public.apiBase}/admin/courses`,{headers:{Authorization:`Bearer ${y.value}`}});o.success&&(i.value=o.data)}catch(o){console.error("Error loading courses:",o)}},We=async()=>{try{const o={};if(_.value==="day")o.start_date=g(f.value,"yyyy-MM-dd"),o.end_date=g(f.value,"yyyy-MM-dd");else if(_.value==="week"){const u=J(b.value,{weekStartsOn:1});o.start_date=g(b.value,"yyyy-MM-dd"),o.end_date=g(u,"yyyy-MM-dd")}else if(_.value==="month"){const u=pe(w.value),S=Te(w.value);o.start_date=g(u,"yyyy-MM-dd"),o.end_date=g(S,"yyyy-MM-dd")}else if(_.value==="4days"){const u=P(f.value,3);o.start_date=g(f.value,"yyyy-MM-dd"),o.end_date=g(u,"yyyy-MM-dd")}else if(_.value==="agenda"){const u=new Date().toISOString().split("T")[0];o.start_date=u}else if(k.value==="today"){const u=new Date().toISOString().split("T")[0];o.start_date=u,o.end_date=u}else if(k.value==="week"){const u=ne(new Date,{weekStartsOn:1}),S=J(new Date,{weekStartsOn:1});o.start_date=g(u,"yyyy-MM-dd"),o.end_date=g(S,"yyyy-MM-dd")}else if(k.value==="month"){const u=new Date,S=new Date(u.getFullYear(),u.getMonth(),1),K=new Date(u.getFullYear(),u.getMonth()+1,0);o.start_date=g(S,"yyyy-MM-dd"),o.end_date=g(K,"yyyy-MM-dd")}else if(k.value==="upcoming"){const u=new Date().toISOString().split("T")[0];o.start_date=u}else k.value==="custom"&&(M.value&&(o.start_date=M.value),v.value&&(o.end_date=v.value));o.include_shared="true";const n=await $fetch(`${V.public.apiBase}/calendar/events`,{headers:{Authorization:`Bearer ${y.value}`},params:o});n.success&&(j.value=n.data)}catch(o){console.error("Error loading events:",o)}},Ze=async()=>{try{const o={};if(_.value==="day")o.start_date=g(f.value,"yyyy-MM-dd"),o.end_date=g(f.value,"yyyy-MM-dd");else if(_.value==="week"){const u=J(b.value,{weekStartsOn:1});o.start_date=g(b.value,"yyyy-MM-dd"),o.end_date=g(u,"yyyy-MM-dd")}else if(_.value==="month"){const u=pe(w.value),S=Te(w.value);o.start_date=g(u,"yyyy-MM-dd"),o.end_date=g(S,"yyyy-MM-dd")}else if(_.value==="4days"){const u=P(f.value,3);o.start_date=g(f.value,"yyyy-MM-dd"),o.end_date=g(u,"yyyy-MM-dd")}else if(_.value==="agenda"){const u=new Date().toISOString().split("T")[0];o.start_date=u}else if(k.value==="today"){const u=new Date().toISOString().split("T")[0];o.start_date=u,o.end_date=u}else if(k.value==="week"){const u=ne(new Date,{weekStartsOn:1}),S=J(new Date,{weekStartsOn:1});o.start_date=g(u,"yyyy-MM-dd"),o.end_date=g(S,"yyyy-MM-dd")}else if(k.value==="month"){const u=new Date,S=new Date(u.getFullYear(),u.getMonth(),1),K=new Date(u.getFullYear(),u.getMonth()+1,0);o.start_date=g(S,"yyyy-MM-dd"),o.end_date=g(K,"yyyy-MM-dd")}else if(k.value==="upcoming"){const u=new Date().toISOString().split("T")[0];o.start_date=u}else k.value==="custom"&&(M.value&&(o.start_date=M.value),v.value&&(o.end_date=v.value));o.include_shared="true";const n=await $fetch(`${V.public.apiBase}/calendar/tasks`,{headers:{Authorization:`Bearer ${y.value}`},params:o});n.success&&(H.value=n.data)}catch(o){console.error("Error loading tasks:",o)}},Je=async()=>{try{const o={};if(_.value==="day")o.start_date=g(f.value,"yyyy-MM-dd"),o.end_date=g(f.value,"yyyy-MM-dd");else if(_.value==="week"){const u=J(b.value,{weekStartsOn:1});o.start_date=g(b.value,"yyyy-MM-dd"),o.end_date=g(u,"yyyy-MM-dd")}else if(_.value==="month"){const u=pe(w.value),S=Te(w.value);o.start_date=g(u,"yyyy-MM-dd"),o.end_date=g(S,"yyyy-MM-dd")}else if(_.value==="4days"){const u=P(f.value,3);o.start_date=g(f.value,"yyyy-MM-dd"),o.end_date=g(u,"yyyy-MM-dd")}else if(_.value==="agenda"){const u=new Date().toISOString().split("T")[0];o.start_date=u}else if(k.value==="today"){const u=new Date().toISOString().split("T")[0];o.start_date=u,o.end_date=u}else if(k.value==="week"){const u=ne(new Date,{weekStartsOn:1}),S=J(new Date,{weekStartsOn:1});o.start_date=g(u,"yyyy-MM-dd"),o.end_date=g(S,"yyyy-MM-dd")}else if(k.value==="month"){const u=new Date,S=new Date(u.getFullYear(),u.getMonth(),1),K=new Date(u.getFullYear(),u.getMonth()+1,0);o.start_date=g(S,"yyyy-MM-dd"),o.end_date=g(K,"yyyy-MM-dd")}else if(k.value==="upcoming"){const u=new Date().toISOString().split("T")[0];o.start_date=u}else k.value==="custom"&&(M.value&&(o.start_date=M.value),v.value&&(o.end_date=v.value));const n=await $fetch(`${V.public.apiBase}/calendar/appointments`,{headers:{Authorization:`Bearer ${y.value}`},params:o});n.success&&(z.value=n.data)}catch(o){console.error("Error loading appointments:",o)}},oe=async()=>{I.value=!0,r.value="";try{const o={};if(_.value==="day")o.start_date=g(f.value,"yyyy-MM-dd"),o.end_date=g(f.value,"yyyy-MM-dd");else if(_.value==="week"){const u=J(b.value,{weekStartsOn:1});o.start_date=g(b.value,"yyyy-MM-dd"),o.end_date=g(u,"yyyy-MM-dd")}else if(_.value==="month"){const u=pe(w.value),S=Te(w.value);o.start_date=g(u,"yyyy-MM-dd"),o.end_date=g(S,"yyyy-MM-dd")}else if(_.value==="4days"){const u=P(f.value,3);o.start_date=g(f.value,"yyyy-MM-dd"),o.end_date=g(u,"yyyy-MM-dd")}else if(_.value==="agenda"){const u=new Date().toISOString().split("T")[0];o.start_date=u}else if(k.value==="today"){const u=new Date().toISOString().split("T")[0];o.start_date=u,o.end_date=u}else if(k.value==="week"){const u=ne(new Date,{weekStartsOn:1}),S=J(new Date,{weekStartsOn:1});o.start_date=g(u,"yyyy-MM-dd"),o.end_date=g(S,"yyyy-MM-dd"),b.value=u}else if(k.value==="month"){const u=new Date,S=new Date(u.getFullYear(),u.getMonth(),1),K=new Date(u.getFullYear(),u.getMonth()+1,0);o.start_date=g(S,"yyyy-MM-dd"),o.end_date=g(K,"yyyy-MM-dd")}else if(k.value==="upcoming"){const u=new Date().toISOString().split("T")[0];o.start_date=u}else k.value==="custom"&&(M.value&&(o.start_date=M.value),v.value&&(o.end_date=v.value));Z.status&&(o.status=Z.status),Z.courseId&&(o.course_id=Z.courseId);const n=await $fetch(`${V.public.apiBase}/admin/tutor/schedules`,{headers:{Authorization:`Bearer ${y.value}`},params:o});n.success&&(E.value=n.data),await Promise.all([We(),Ze(),Je()])}catch(o){console.error("Error loading schedules:",o),r.value=o.data?.message||"เกิดข้อผิดพลาดในการโหลดข้อมูล"}finally{I.value=!1}},nt=o=>{if(_.value=o,$.value=!1,o==="day")k.value="today",f.value=new Date;else if(o==="week")k.value="week",b.value=ne(new Date,{weekStartsOn:1});else if(o==="month")k.value="month",w.value=pe(new Date);else if(o==="4days"){k.value="custom",f.value=new Date;const n=P(f.value,3);M.value=g(f.value,"yyyy-MM-dd"),v.value=g(n,"yyyy-MM-dd")}else o==="agenda"&&(k.value="upcoming");oe()},lt=()=>{if(_.value==="day")f.value=P(f.value,-1),k.value="custom",M.value=g(f.value,"yyyy-MM-dd"),v.value=g(f.value,"yyyy-MM-dd");else if(_.value==="week"){b.value=_t(b.value);const o=J(b.value,{weekStartsOn:1});k.value="custom",M.value=g(b.value,"yyyy-MM-dd"),v.value=g(o,"yyyy-MM-dd")}else if(_.value==="month")w.value=bt(w.value),k.value="month";else if(_.value==="4days"){f.value=P(f.value,-4);const o=P(f.value,3);k.value="custom",M.value=g(f.value,"yyyy-MM-dd"),v.value=g(o,"yyyy-MM-dd")}oe()},at=()=>{if(_.value==="day")f.value=P(f.value,1),k.value="custom",M.value=g(f.value,"yyyy-MM-dd"),v.value=g(f.value,"yyyy-MM-dd");else if(_.value==="week"){b.value=st(b.value,1);const o=J(b.value,{weekStartsOn:1});k.value="custom",M.value=g(b.value,"yyyy-MM-dd"),v.value=g(o,"yyyy-MM-dd")}else if(_.value==="month")w.value=tt(w.value,1),k.value="month";else if(_.value==="4days"){f.value=P(f.value,4);const o=P(f.value,3);k.value="custom",M.value=g(f.value,"yyyy-MM-dd"),v.value=g(o,"yyyy-MM-dd")}oe()},rt=()=>{const o=new Date;if(_.value==="day")f.value=o,k.value="today";else if(_.value==="week")b.value=ne(o,{weekStartsOn:1}),k.value="week";else if(_.value==="month")w.value=pe(o),k.value="month";else if(_.value==="4days"){f.value=o;const n=P(o,3);k.value="custom",M.value=g(o,"yyyy-MM-dd"),v.value=g(n,"yyyy-MM-dd")}oe()},it=()=>{if(k.value==="week"&&_.value==="week"){const o=ne(new Date,{weekStartsOn:1});b.value=o}oe()},xe=o=>E.value.filter(n=>{const u=le(n.start_datetime);return he(u,o)}),fe=o=>j.value.filter(n=>{const u=le(n.start_datetime);return he(u,o)}),be=o=>H.value.filter(n=>{if(n.due_date){const u=le(n.due_date);return he(u,o)}else if(n.start_date){const u=le(n.start_date);return he(u,o)}return!1}),_e=o=>z.value.filter(n=>{const u=le(n.start_datetime);return he(u,o)}),dt=()=>{We(),Q.value=!1,te.value=null},ut=()=>{Ze(),ee.value=!1,ue.value=null},ct=()=>{Je(),de.value=!1,se.value=null},De=o=>{te.value=o,Q.value=!0},$e=o=>{ue.value=o,ee.value=!0},Ce=o=>{se.value=o,de.value=!0},Fe=o=>ft(o),pt=o=>{const n=J(o,{weekStartsOn:1});return`${g(o,"dd MMM yyyy",{locale:X})} - ${g(n,"dd MMM yyyy",{locale:X})}`},Ne=o=>g(o,"d",{locale:X}),Se=o=>g(le(o),"dd MMM yyyy",{locale:X}),ke=o=>g(le(o),"HH:mm",{locale:X}),ve=(o,n)=>`${g(le(o),"HH:mm")} - ${g(le(n),"HH:mm")}`,Ke=o=>({scheduled:"กำหนดแล้ว",ongoing:"กำลังสอน",completed:"เสร็จสิ้น",cancelled:"ยกเลิก"})[o]||o,Xe=o=>({scheduled:"bg-blue-100 text-blue-800",ongoing:"bg-orange-100 text-orange-800",completed:"bg-green-100 text-green-800",cancelled:"bg-gray-100 text-gray-800"})[o]||"bg-gray-100 text-gray-800",Ge=o=>({live:"Live",vod:"VOD"})[o]||o,Qe=o=>({live:"bg-red-100 text-red-800",vod:"bg-purple-100 text-purple-800"})[o]||"bg-gray-100 text-gray-800",He=o=>o.status==="completed"?"bg-green-100 text-green-800 border border-green-200":o.status==="ongoing"?"bg-orange-100 text-orange-800 border border-orange-200":o.status==="cancelled"?"bg-gray-100 text-gray-600 border border-gray-200":"bg-blue-100 text-blue-800 border border-blue-200",yt=o=>o==="completed"?"border-green-500 bg-green-50":o==="ongoing"?"border-orange-500 bg-orange-50":o==="cancelled"?"border-gray-400 bg-gray-50":"border-blue-500 bg-blue-50";return Ue(()=>{ot(),oe()}),(o,n)=>{const u=ts,S=vs,K=Cs;return a(),l("div",{onClick:n[19]||(n[19]=s=>{$.value=!1,q.value=!1,ae.value={}})},[e("div",Ss,[n[27]||(n[27]=e("div",null,[e("h1",{class:"text-3xl font-bold"},"ปฏิทินกิจกรรม"),e("p",{class:"text-gray-600 mt-1"},"จัดการและดูตารางสอนและกิจกรรมของคุณ")],-1)),e("div",Ts,[e("div",{class:"relative",onClick:n[5]||(n[5]=Y(()=>{},["stop"]))},[e("button",{onClick:n[0]||(n[0]=Y(s=>q.value=!t(q),["stop"])),class:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center space-x-2"},[...n[20]||(n[20]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),e("span",null,"สร้าง",-1),e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1)])]),t(q)?(a(),l("div",{key:0,onClick:n[4]||(n[4]=Y(()=>{},["stop"])),class:"absolute left-0 mt-2 w-48 bg-gray-800 rounded-lg shadow-lg border border-gray-700 py-1 z-50"},[e("button",{onClick:n[1]||(n[1]=s=>{q.value=!1,R.value=null,Q.value=!0,te.value=null}),class:"w-full text-left px-4 py-2 text-sm text-white hover:bg-gray-700 transition-colors flex items-center space-x-2"},[...n[21]||(n[21]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1),e("span",null,"กิจกรรม",-1)])]),e("button",{onClick:n[2]||(n[2]=s=>{q.value=!1,R.value=null,ee.value=!0,ue.value=null}),class:"w-full text-left px-4 py-2 text-sm text-white hover:bg-gray-700 transition-colors flex items-center space-x-2"},[...n[22]||(n[22]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})],-1),e("span",null,"งาน",-1)])]),e("button",{onClick:n[3]||(n[3]=s=>{q.value=!1,R.value=null,de.value=!0,se.value=null}),class:"w-full text-left px-4 py-2 text-sm text-white hover:bg-gray-700 transition-colors flex items-center space-x-2"},[...n[23]||(n[23]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})],-1),e("span",null,"กำหนดเวลาการนัดหมาย",-1)])])])):h("",!0)]),e("div",{class:"relative",onClick:n[8]||(n[8]=Y(()=>{},["stop"]))},[e("button",{onClick:n[6]||(n[6]=Y(s=>$.value=!t($),["stop"])),class:"px-4 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 flex items-center space-x-2 text-gray-700"},[e("span",null,p(t(me)),1),n[24]||(n[24]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1))]),t($)?(a(),l("div",{key:0,onClick:n[7]||(n[7]=Y(()=>{},["stop"])),class:"absolute right-0 mt-2 w-48 bg-gray-800 rounded-lg shadow-lg z-50"},[e("div",Bs,[(a(),l(T,null,B(we,s=>e("button",{key:s.value,onClick:c=>nt(s.value),class:F(["w-full px-4 py-2 text-left text-white hover:bg-gray-700 flex items-center justify-between",{"bg-gray-700":t(_)===s.value}])},[e("span",null,p(s.label),1),e("span",Es,p(s.shortcut),1)],10,Vs)),64))])])):h("",!0)]),t(Me)?(a(),l("div",js,[e("button",{onClick:lt,class:"p-2 border border-gray-300 rounded-lg hover:bg-gray-50"},[...n[25]||(n[25]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])]),e("button",{onClick:rt,class:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 text-sm"}," วันนี้ "),e("button",{onClick:at,class:"p-2 border border-gray-300 rounded-lg hover:bg-gray-50"},[...n[26]||(n[26]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])])])):h("",!0),t(Me)?(a(),l("div",Us,p(t(Be)),1)):h("",!0)])]),e("div",Os,[e("div",zs,[e("div",As,[e("div",null,[n[28]||(n[28]=e("p",{class:"text-sm text-gray-600"},"วันนี้",-1)),e("p",Is,p(t(U)),1)]),n[29]||(n[29]=e("div",{class:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center"},[e("svg",{class:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})])],-1))])]),e("div",Fs,[e("div",Ns,[e("div",null,[n[30]||(n[30]=e("p",{class:"text-sm text-gray-600"},"สัปดาห์นี้",-1)),e("p",Hs,p(t(d)),1)]),n[31]||(n[31]=e("div",{class:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center"},[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})])],-1))])]),e("div",Ls,[e("div",Ps,[e("div",null,[n[32]||(n[32]=e("p",{class:"text-sm text-gray-600"},"กำลังสอน",-1)),e("p",qs,p(t(m)),1)]),n[33]||(n[33]=e("div",{class:"w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center"},[e("svg",{class:"w-6 h-6 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1))])]),e("div",Rs,[e("div",Ys,[e("div",null,[n[34]||(n[34]=e("p",{class:"text-sm text-gray-600"},"เสร็จสิ้น",-1)),e("p",Ws,p(t(ye)),1)]),n[35]||(n[35]=e("div",{class:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center"},[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})])],-1))])])]),e("div",Zs,[e("div",Js,[e("div",null,[n[37]||(n[37]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"ช่วงเวลา",-1)),D(e("select",{"onUpdate:modelValue":n[9]||(n[9]=s=>Pe(k)?k.value=s:null),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",onChange:it},[...n[36]||(n[36]=[qe('<option value="today">วันนี้</option><option value="week">สัปดาห์นี้</option><option value="month">เดือนนี้</option><option value="upcoming">ที่กำลังจะมาถึง</option><option value="all">ทั้งหมด</option><option value="custom">กำหนดเอง</option>',6)])],544),[[W,t(k)]])]),t(k)==="custom"?(a(),l("div",Ks,[n[38]||(n[38]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"จากวันที่",-1)),D(e("input",{"onUpdate:modelValue":n[10]||(n[10]=s=>Pe(M)?M.value=s:null),type:"date",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",onChange:oe},null,544),[[N,t(M)]])])):h("",!0),t(k)==="custom"?(a(),l("div",Xs,[n[39]||(n[39]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"ถึงวันที่",-1)),D(e("input",{"onUpdate:modelValue":n[11]||(n[11]=s=>Pe(v)?v.value=s:null),type:"date",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",onChange:oe},null,544),[[N,t(v)]])])):h("",!0),e("div",null,[n[41]||(n[41]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"สถานะ",-1)),D(e("select",{"onUpdate:modelValue":n[12]||(n[12]=s=>t(Z).status=s),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",onChange:oe},[...n[40]||(n[40]=[qe('<option value="">ทั้งหมด</option><option value="scheduled">กำหนดแล้ว</option><option value="ongoing">กำลังสอน</option><option value="completed">เสร็จสิ้น</option><option value="cancelled">ยกเลิก</option>',5)])],544),[[W,t(Z).status]])]),e("div",null,[n[43]||(n[43]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"คอร์ส",-1)),D(e("select",{"onUpdate:modelValue":n[13]||(n[13]=s=>t(Z).courseId=s),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",onChange:oe},[n[42]||(n[42]=e("option",{value:""},"ทั้งหมด",-1)),(a(!0),l(T,null,B(t(i),s=>(a(),l("option",{key:s.id,value:s.id},p(s.title),9,Gs))),128))],544),[[W,t(Z).courseId]])])])]),t(_)==="day"?(a(),l("div",Qs,[t(I)?(a(),l("div",eo,[...n[44]||(n[44]=[e("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-green-600"},null,-1),e("p",{class:"mt-2 text-gray-600"},"กำลังโหลด...",-1)])])):t(r)?(a(),l("div",to,p(t(r)),1)):(a(),l("div",so,[e("div",oo,[(a(!0),l(T,null,B(fe(t(f)),s=>(a(),l("div",{key:`event-${s.id}`,class:"border-l-4 p-4 rounded-r-lg cursor-pointer hover:shadow-md transition-shadow",style:L({borderColor:s.color}),onClick:c=>De(s)},[e("div",lo,[e("div",ao,[e("div",ro,[e("span",io,p(s.title),1),n[45]||(n[45]=e("span",{class:"px-2 py-1 text-xs font-medium rounded bg-gray-100 text-gray-700"}," Event ",-1)),s.is_shared?(a(),l("span",uo," แชร์ ")):h("",!0)]),e("div",co,[s.location?(a(),l("div",po,"สถานที่: "+p(s.location),1)):h("",!0),e("div",null,"เวลา: "+p(ve(s.start_datetime,s.end_datetime)),1),s.description?(a(),l("div",yo,p(s.description),1)):h("",!0)])])])],12,no))),128)),(a(!0),l(T,null,B(be(t(f)),s=>(a(),l("div",{key:`task-${s.id}`,class:"border-l-4 p-4 rounded-r-lg cursor-pointer hover:shadow-md transition-shadow",style:L({borderColor:s.color}),onClick:c=>$e(s)},[e("div",go,[e("div",mo,[e("div",xo,[(a(),l("svg",{class:F(["w-5 h-5",s.status==="completed"?"text-green-600":"text-gray-400"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s.status==="completed"?(a(),l("path",fo)):(a(),l("path",bo))],2)),e("span",{class:F(["text-lg font-semibold text-gray-900",s.status==="completed"?"line-through opacity-60":""])},p(s.title),3),n[46]||(n[46]=e("span",{class:"px-2 py-1 text-xs font-medium rounded bg-green-100 text-green-700"}," งาน ",-1)),s.status==="completed"?(a(),l("span",_o," เสร็จแล้ว ")):h("",!0)]),e("div",ko,[s.due_date?(a(),l("div",ho,"ครบกำหนด: "+p(Se(s.due_date)),1)):h("",!0),s.priority?(a(),l("div",wo,"ลำดับความสำคัญ: "+p(s.priority),1)):h("",!0),s.description?(a(),l("div",Mo,p(s.description),1)):h("",!0)])])])],12,vo))),128)),(a(!0),l(T,null,B(_e(t(f)),s=>(a(),l("div",{key:`appointment-${s.id}`,class:"border-l-4 p-4 rounded-r-lg cursor-pointer hover:shadow-md transition-shadow",style:L({borderColor:s.color}),onClick:c=>Ce(s)},[e("div",$o,[e("div",Co,[e("div",So,[e("span",To,p(s.title),1),n[47]||(n[47]=e("span",{class:"px-2 py-1 text-xs font-medium rounded bg-blue-100 text-blue-700"}," การนัดหมาย ",-1)),s.status==="confirmed"?(a(),l("span",Bo," ยืนยันแล้ว ")):h("",!0)]),e("div",Vo,[s.location?(a(),l("div",Eo,"สถานที่: "+p(s.location),1)):h("",!0),e("div",null,"เวลา: "+p(ve(s.start_datetime,s.end_datetime)),1),s.participants&&s.participants.length>0?(a(),l("div",jo," ผู้เข้าร่วม: "+p(s.participants.length)+" คน ",1)):h("",!0),s.description?(a(),l("div",Uo,p(s.description),1)):h("",!0)])])])],12,Do))),128)),(a(!0),l(T,null,B(xe(t(f)),s=>(a(),l("div",{key:s.id,class:F(["border-l-4 p-4 rounded-r-lg",yt(s.status)])},[e("div",Oo,[e("div",zo,[e("div",Ao,[e("span",Io,p(s.course.title),1),e("span",{class:F(["px-2 py-1 text-xs font-medium rounded",Xe(s.status)])},p(Ke(s.status)),3),e("span",{class:F(["px-2 py-1 text-xs font-medium rounded",Qe(s.session_type)])},p(Ge(s.session_type)),3)]),e("div",Fo,[e("div",null,"สาขา: "+p(s.branch.name),1),e("div",null,"เวลา: "+p(ve(s.start_datetime,s.end_datetime)),1)])]),e("div",No,[s.session_type==="live"&&s.meeting_link?(a(),l("a",{key:0,href:s.meeting_link,target:"_blank",rel:"noopener noreferrer",class:"px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 text-sm"}," เข้าร่วม ",8,Ho)):s.session_type==="vod"&&s.video_url?(a(),l("a",{key:1,href:s.video_url,target:"_blank",rel:"noopener noreferrer",class:"px-3 py-1 bg-purple-600 text-white rounded hover:bg-purple-700 text-sm"}," ดูวิดีโอ ",8,Lo)):h("",!0)])])],2))),128)),xe(t(f)).length===0&&fe(t(f)).length===0&&be(t(f)).length===0&&_e(t(f)).length===0?(a(),l("div",Po," ไม่มีกิจกรรมในวันนี้ ")):h("",!0)])]))])):t(_)==="week"?(a(),l("div",qo,[t(I)?(a(),l("div",Ro,[...n[48]||(n[48]=[e("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-green-600"},null,-1),e("p",{class:"mt-2 text-gray-600"},"กำลังโหลด...",-1)])])):t(r)?(a(),l("div",Yo,p(t(r)),1)):(a(),l("div",Wo,[e("div",Zo,[(a(!0),l(T,null,B(t(Ie),s=>(a(),l("div",{key:s.key,class:"text-center font-semibold text-gray-700 py-2 border-b"},[e("div",Jo,p(s.label),1)]))),128)),(a(!0),l(T,null,B(t(Ie),s=>(a(),l("div",{key:s.key,class:F(["min-h-32 border border-gray-200 rounded-lg p-2 relative group",{"bg-blue-50":Fe(s.date),"bg-gray-50":s.date<new Date(new Date().setHours(0,0,0,0))}])},[e("div",Ko,[e("div",Xo,p(Ne(s.date)),1),e("div",{class:"relative",onClick:n[15]||(n[15]=Y(()=>{},["stop"]))},[e("button",{onClick:Y(c=>t(ae)[s.key]=!t(ae)[s.key],["stop"]),class:"opacity-0 group-hover:opacity-100 p-1 rounded hover:bg-gray-200 transition-opacity",title:`จัดการ${t(g)(s.date," dd MMM yyyy",{locale:t(X)})}`},[...n[49]||(n[49]=[e("svg",{class:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})],-1)])],8,Go),t(ae)[s.key]?(a(),l("div",{key:0,onClick:n[14]||(n[14]=Y(()=>{},["stop"])),class:"absolute right-0 mt-1 w-48 bg-gray-800 rounded-lg shadow-lg border border-gray-700 py-1 z-50"},[e("button",{onClick:c=>{t(ae)[s.key]=!1,R.value=s.date,Q.value=!0,te.value=null},class:"w-full text-left px-4 py-2 text-sm text-white hover:bg-gray-700 transition-colors flex items-center space-x-2"},[...n[50]||(n[50]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1),e("span",null,"สร้างกิจกรรม",-1)])],8,Qo),e("button",{onClick:c=>{t(ae)[s.key]=!1,R.value=s.date,ee.value=!0,ue.value=null},class:"w-full text-left px-4 py-2 text-sm text-white hover:bg-gray-700 transition-colors flex items-center space-x-2"},[...n[51]||(n[51]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})],-1),e("span",null,"สร้างงาน",-1)])],8,en),e("button",{onClick:c=>{t(ae)[s.key]=!1,R.value=s.date,de.value=!0,se.value=null},class:"w-full text-left px-4 py-2 text-sm text-white hover:bg-gray-700 transition-colors flex items-center space-x-2"},[...n[52]||(n[52]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})],-1),e("span",null,"สร้างการนัดหมาย",-1)])],8,tn)])):h("",!0)])]),e("div",sn,[(a(!0),l(T,null,B(fe(s.date),c=>(a(),l("div",{key:`event-${c.id}`,class:"text-xs p-1 rounded cursor-pointer truncate",style:L({backgroundColor:c.color+"20",borderLeft:`3px solid ${c.color}`}),onClick:re=>De(c)},[e("div",nn,p(c.title),1),e("div",ln,p(ke(c.start_datetime)),1)],12,on))),128)),(a(!0),l(T,null,B(be(s.date),c=>(a(),l("div",{key:`task-${c.id}`,class:"text-xs p-1 rounded cursor-pointer truncate flex items-center space-x-1",style:L({backgroundColor:c.color+"20",borderLeft:`2px solid ${c.color}`}),onClick:re=>$e(c)},[(a(),l("svg",{class:F(["w-3 h-3 flex-shrink-0",c.status==="completed"?"text-green-600":"text-gray-400"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c.status==="completed"?(a(),l("path",rn)):(a(),l("path",dn))],2)),e("div",{class:F(["font-medium truncate text-gray-900",c.status==="completed"?"line-through opacity-60":""])},p(c.title),3)],12,an))),128)),(a(!0),l(T,null,B(_e(s.date),c=>(a(),l("div",{key:`appointment-${c.id}`,class:"text-xs p-1 rounded cursor-pointer truncate",style:L({backgroundColor:c.color+"20",borderLeft:`3px solid ${c.color}`}),onClick:re=>Ce(c)},[e("div",cn,p(c.title),1),e("div",pn,p(ke(c.start_datetime)),1)],12,un))),128)),(a(!0),l(T,null,B(xe(s.date),c=>(a(),l("div",{key:c.id,class:F(["text-xs p-1 rounded cursor-pointer",He(c)]),onClick:re=>x.value=c},[e("div",vn,p(c.course.title),1),e("div",gn,p(ke(c.start_datetime)),1)],10,yn))),128))])],2))),128))])]))])):t(_)==="month"?(a(),l("div",mn,[t(I)?(a(),l("div",xn,[...n[53]||(n[53]=[e("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-green-600"},null,-1),e("p",{class:"mt-2 text-gray-600"},"กำลังโหลด...",-1)])])):t(r)?(a(),l("div",fn,p(t(r)),1)):(a(),l("div",bn,[e("div",_n,[(a(!0),l(T,null,B(t(Ie),s=>(a(),l("div",{key:s.key,class:"text-center font-semibold text-gray-700 py-2"},[e("div",kn,p(s.label),1)]))),128))]),e("div",hn,[(a(!0),l(T,null,B(t(Ae),s=>(a(),l("div",{key:s.key,class:F(["min-h-24 border border-gray-200 rounded p-1",{"bg-blue-50":Fe(s.date),"bg-gray-50":!t(xt)(s.date,t(w))}])},[e("div",wn,p(Ne(s.date)),1),e("div",Mn,[(a(!0),l(T,null,B(fe(s.date),c=>(a(),l("div",{key:`event-${c.id}`,class:"text-xs p-0.5 rounded truncate cursor-pointer",style:L({backgroundColor:c.color+"20",borderLeft:`2px solid ${c.color}`}),title:c.title,onClick:re=>De(c)},p(ke(c.start_datetime))+" "+p(c.title),13,Dn))),128)),(a(!0),l(T,null,B(be(s.date),c=>(a(),l("div",{key:`task-${c.id}`,class:"text-xs p-0.5 rounded truncate cursor-pointer flex items-center space-x-1",style:L({backgroundColor:c.color+"20",borderLeft:`2px solid ${c.color}`}),title:c.title,onClick:re=>$e(c)},[e("span",{class:F(c.status==="completed"?"line-through opacity-60":"")},p(c.title),3)],12,$n))),128)),(a(!0),l(T,null,B(_e(s.date),c=>(a(),l("div",{key:`appointment-${c.id}`,class:"text-xs p-0.5 rounded truncate cursor-pointer",style:L({backgroundColor:c.color+"20",borderLeft:`2px solid ${c.color}`}),title:c.title,onClick:re=>Ce(c)},p(ke(c.start_datetime))+" "+p(c.title),13,Cn))),128)),(a(!0),l(T,null,B(xe(s.date),c=>(a(),l("div",{key:c.id,class:F(["text-xs p-1 rounded truncate cursor-pointer",He(c)]),title:c.course.title},p(ke(c.start_datetime))+" "+p(c.course.title),11,Sn))),128))])],2))),128))])]))])):t(_)==="4days"?(a(),l("div",Tn,[t(I)?(a(),l("div",Bn,[...n[54]||(n[54]=[e("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-green-600"},null,-1),e("p",{class:"mt-2 text-gray-600"},"กำลังโหลด...",-1)])])):t(r)?(a(),l("div",Vn,p(t(r)),1)):(a(),l("div",En,[e("div",jn,[(a(!0),l(T,null,B(t(ze),s=>(a(),l("div",{key:s.key,class:F(["border border-gray-200 rounded-lg p-4",{"bg-blue-50":Fe(s.date)}])},[e("div",Un,[e("div",On,p(s.label),1),e("div",zn,p(Ne(s.date)),1)]),e("div",An,[(a(!0),l(T,null,B(fe(s.date),c=>(a(),l("div",{key:`event-${c.id}`,class:"text-xs p-2 rounded cursor-pointer",style:L({backgroundColor:c.color+"20",borderLeft:`3px solid ${c.color}`}),onClick:re=>De(c)},[e("div",Fn,p(c.title),1),e("div",Nn,p(ve(c.start_datetime,c.end_datetime)),1)],12,In))),128)),(a(!0),l(T,null,B(be(s.date),c=>(a(),l("div",{key:`task-${c.id}`,class:"text-xs p-2 rounded cursor-pointer flex items-center space-x-1",style:L({backgroundColor:c.color+"20",borderLeft:`3px solid ${c.color}`}),onClick:re=>$e(c)},[(a(),l("svg",{class:F(["w-3 h-3 flex-shrink-0",c.status==="completed"?"text-green-600":"text-gray-400"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c.status==="completed"?(a(),l("path",Ln)):(a(),l("path",Pn))],2)),e("div",{class:F(["font-medium truncate text-gray-900",c.status==="completed"?"line-through opacity-60":""])},p(c.title),3)],12,Hn))),128)),(a(!0),l(T,null,B(_e(s.date),c=>(a(),l("div",{key:`appointment-${c.id}`,class:"text-xs p-2 rounded cursor-pointer",style:L({backgroundColor:c.color+"20",borderLeft:`3px solid ${c.color}`}),onClick:re=>Ce(c)},[e("div",Rn,p(c.title),1),e("div",Yn,p(ve(c.start_datetime,c.end_datetime)),1)],12,qn))),128)),(a(!0),l(T,null,B(xe(s.date),c=>(a(),l("div",{key:c.id,class:F(["text-xs p-2 rounded cursor-pointer",He(c)])},[e("div",Wn,p(c.course.title),1),e("div",Zn,p(ve(c.start_datetime,c.end_datetime)),1)],2))),128)),xe(s.date).length===0&&fe(s.date).length===0&&be(s.date).length===0&&_e(s.date).length===0?(a(),l("div",Jn," ไม่มี ")):h("",!0)])],2))),128))])]))])):t(_)==="agenda"?(a(),l("div",Kn,[t(I)?(a(),l("div",Xn,[...n[55]||(n[55]=[e("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-green-600"},null,-1),e("p",{class:"mt-2 text-gray-600"},"กำลังโหลด...",-1)])])):t(r)?(a(),l("div",Gn,p(t(r)),1)):t(E).length===0&&t(j).length===0&&t(H).length===0&&t(z).length===0?(a(),l("div",Qn,[...n[56]||(n[56]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1),e("p",{class:"mt-4 text-lg font-medium"},"ไม่พบกิจกรรม",-1),e("p",{class:"mt-1 text-sm"},"ไม่มีตารางสอน, กิจกรรม, งาน หรือการนัดหมายในช่วงเวลาที่เลือก",-1)])])):(a(),l("div",el,[t(j).length>0?(a(),l("div",tl,[n[57]||(n[57]=e("h3",{class:"px-6 py-3 text-lg font-semibold text-gray-900 border-b"},"Events",-1)),e("div",sl,[(a(!0),l(T,null,B(t(j),s=>(a(),l("div",{key:`event-${s.id}`,class:"px-6 py-4 hover:bg-gray-50 cursor-pointer",onClick:c=>De(s)},[e("div",nl,[e("div",ll,[e("div",al,[e("div",{class:"w-4 h-4 rounded",style:L({backgroundColor:s.color})},null,4),e("div",rl,p(s.title),1),s.is_shared?(a(),l("span",il," แชร์ ")):h("",!0)]),e("div",dl,[G(p(Se(s.start_datetime))+" ",1),s.location?(a(),l("span",ul,"• "+p(s.location),1)):h("",!0)]),s.description?(a(),l("div",cl,p(s.description),1)):h("",!0)])])],8,ol))),128))])])):h("",!0),t(H).length>0?(a(),l("div",pl,[n[58]||(n[58]=e("h3",{class:"px-6 py-3 text-lg font-semibold text-gray-900 border-b"},"งาน",-1)),e("div",yl,[(a(!0),l(T,null,B(t(H),s=>(a(),l("div",{key:`task-${s.id}`,class:"px-6 py-4 hover:bg-gray-50 cursor-pointer",onClick:c=>$e(s)},[e("div",gl,[e("div",ml,[e("div",xl,[(a(),l("svg",{class:F(["w-4 h-4",s.status==="completed"?"text-green-600":"text-gray-400"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s.status==="completed"?(a(),l("path",fl)):(a(),l("path",bl))],2)),e("div",{class:F(["text-sm font-medium text-gray-900",s.status==="completed"?"line-through opacity-60":""])},p(s.title),3)]),e("div",_l,[s.due_date?(a(),l("span",kl,p(Se(s.due_date)),1)):h("",!0),s.priority?(a(),l("span",hl,"• "+p(s.priority),1)):h("",!0)]),s.description?(a(),l("div",wl,p(s.description),1)):h("",!0)])])],8,vl))),128))])])):h("",!0),t(z).length>0?(a(),l("div",Ml,[n[59]||(n[59]=e("h3",{class:"px-6 py-3 text-lg font-semibold text-gray-900 border-b"},"การนัดหมาย",-1)),e("div",Dl,[(a(!0),l(T,null,B(t(z),s=>(a(),l("div",{key:`appointment-${s.id}`,class:"px-6 py-4 hover:bg-gray-50 cursor-pointer",onClick:c=>Ce(s)},[e("div",Cl,[e("div",Sl,[e("div",Tl,[e("div",{class:"w-4 h-4 rounded",style:L({backgroundColor:s.color})},null,4),e("div",Bl,p(s.title),1),s.status==="confirmed"?(a(),l("span",Vl," ยืนยันแล้ว ")):h("",!0)]),e("div",El,[G(p(Se(s.start_datetime))+" ",1),s.location?(a(),l("span",jl,"• "+p(s.location),1)):h("",!0),s.participants&&s.participants.length>0?(a(),l("span",Ul,"• "+p(s.participants.length)+" คน",1)):h("",!0)]),s.description?(a(),l("div",Ol,p(s.description),1)):h("",!0)])])],8,$l))),128))])])):h("",!0),t(E).length>0?(a(),l("div",zl,[n[63]||(n[63]=e("h3",{class:"px-6 py-3 text-lg font-semibold text-gray-900 border-b"},"ตารางสอน",-1)),e("table",Al,[n[62]||(n[62]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"วันเวลา"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"คอร์ส"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"สาขา"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"ประเภท"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"สถานะ"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"ลิงก์")])],-1)),e("tbody",Il,[(a(!0),l(T,null,B(t(E),s=>(a(),l("tr",{key:s.id,class:"hover:bg-gray-50"},[e("td",Fl,[e("div",Nl,p(Se(s.start_datetime)),1),e("div",Hl,p(ve(s.start_datetime,s.end_datetime)),1)]),e("td",Ll,[e("div",Pl,p(s.course.title),1),s.course.code?(a(),l("div",ql,p(s.course.code),1)):h("",!0)]),e("td",Rl,[e("div",Yl,p(s.branch.name),1),s.branch.code?(a(),l("div",Wl,p(s.branch.code),1)):h("",!0)]),e("td",Zl,[e("span",{class:F(["px-2 py-1 text-xs font-medium rounded",Qe(s.session_type)])},p(Ge(s.session_type)),3)]),e("td",Jl,[e("span",{class:F(["px-2 py-1 text-xs font-medium rounded",Xe(s.status)])},p(Ke(s.status)),3)]),e("td",Kl,[s.session_type==="live"&&s.meeting_link?(a(),l("div",Xl,[e("a",{href:s.meeting_link,target:"_blank",rel:"noopener noreferrer",class:"text-blue-600 hover:text-blue-800 text-sm flex items-center"},[...n[60]||(n[60]=[e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})],-1),G(" เข้าร่วม ",-1)])],8,Gl)])):s.session_type==="vod"&&s.video_url?(a(),l("div",Ql,[e("a",{href:s.video_url,target:"_blank",rel:"noopener noreferrer",class:"text-purple-600 hover:text-purple-800 text-sm flex items-center"},[...n[61]||(n[61]=[e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),G(" ดูวิดีโอ ",-1)])],8,ea)])):(a(),l("span",ta,"-"))])]))),128))])])])):h("",!0)]))])):h("",!0),Le(u,{show:t(Q),event:t(te),"initial-date":t(R),onClose:n[16]||(n[16]=s=>{Q.value=!1,te.value=null,R.value=null}),onSaved:dt},null,8,["show","event","initial-date"]),Le(S,{show:t(ee),task:t(ue),"initial-date":t(R),onClose:n[17]||(n[17]=s=>{ee.value=!1,ue.value=null,R.value=null}),onSaved:ut},null,8,["show","task","initial-date"]),Le(K,{show:t(de),appointment:t(se),"initial-date":t(R),onClose:n[18]||(n[18]=s=>{de.value=!1,se.value=null,R.value=null}),onSaved:ct},null,8,["show","appointment","initial-date"])])}}});export{ia as default};
