import{d as x,l as y,r as v,q as w,E as _,c as n,b as s,s as k,x as i,y as d,e as a,J as j,v as h,g as T,a as u}from"./CX4WDIMJ.js";const U={class:"space-y-6"},V={class:"bg-white rounded-lg shadow p-6"},z={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},B={class:"flex justify-end pt-4"},q=["disabled"],E={key:0,class:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"},N=x({__name:"FileUploadTab",props:{settings:{}},emits:["saved"],setup(p,{emit:m}){const g=p,f=m,{accessToken:c}=y(),r=v(!1),t=w({max_file_size:10,allowed_file_types:"jpg,jpeg,png,gif,pdf,doc,docx,xls,xlsx",storage_type:"local"});_(()=>g.settings,l=>{l&&l.length>0&&l.forEach(e=>{const o=e.key;o in t&&(typeof t[o]=="number"?t[o]=Number(e.value)||t[o]:t[o]=e.value||t[o])})},{immediate:!0});const b=async()=>{try{r.value=!0;const l=Object.keys(t).map(e=>({key:e,value:t[e]}));await $fetch("/api/admin/settings/system",{method:"PUT",headers:{Authorization:`Bearer ${c.value}`},body:{settings:l}}),f("saved")}catch(l){console.error("Error saving file upload settings:",l),alert(l.data?.message||"เกิดข้อผิดพลาดในการบันทึกการตั้งค่า")}finally{r.value=!1}};return(l,e)=>(u(),n("div",U,[s("div",V,[e[9]||(e[9]=s("h2",{class:"text-xl font-semibold mb-4"},"การตั้งค่าการอัพโหลดไฟล์",-1)),s("form",{onSubmit:k(b,["prevent"]),class:"space-y-4"},[s("div",z,[s("div",null,[e[3]||(e[3]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," ขนาดไฟล์สูงสุด (MB) ",-1)),i(s("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>a(t).max_file_size=o),type:"number",min:"1",max:"100",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",required:""},null,512),[[d,a(t).max_file_size,void 0,{number:!0}]])]),s("div",null,[e[5]||(e[5]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," ประเภท Storage ",-1)),i(s("select",{"onUpdate:modelValue":e[1]||(e[1]=o=>a(t).storage_type=o),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",required:""},[...e[4]||(e[4]=[s("option",{value:"local"},"Local Storage",-1),s("option",{value:"s3"},"Amazon S3",-1)])],512),[[j,a(t).storage_type]])])]),s("div",null,[e[6]||(e[6]=s("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," ประเภทไฟล์ที่อนุญาต (คั่นด้วย comma) ",-1)),i(s("input",{"onUpdate:modelValue":e[2]||(e[2]=o=>a(t).allowed_file_types=o),type:"text",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"jpg,jpeg,png,gif,pdf,doc,docx",required:""},null,512),[[d,a(t).allowed_file_types]]),e[7]||(e[7]=s("p",{class:"mt-1 text-sm text-gray-500"}," ตัวอย่าง: jpg, jpeg, png, gif, pdf, doc, docx, xls, xlsx ",-1))]),s("div",B,[s("button",{type:"submit",disabled:a(r),class:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center"},[a(r)?(u(),n("span",E)):h("",!0),e[8]||(e[8]=T(" บันทึก ",-1))],8,q)])],32)])]))}});export{N as _};
