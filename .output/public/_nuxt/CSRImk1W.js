import{d as $,l as V,r as y,q,E as U,c as m,v as x,b as t,t as v,s as _,x as r,g as b,y as a,e as n,J as M,L as k,a as c}from"./B_rLn4hw.js";const B={class:"bg-white rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto"},C={class:"flex items-center justify-between mb-6"},S={class:"text-2xl font-bold"},T={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},j={class:"md:col-span-2 flex items-center space-x-4"},A={class:"flex items-center"},z={class:"flex items-center"},E={key:0,class:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded"},I={class:"flex justify-end space-x-3 pt-4"},L=["disabled"],N={key:0},D={key:1},R=$({__name:"BankAccountModal",props:{show:{type:Boolean},account:{default:null},paymentMethodId:{}},emits:["close","saved"],setup(p,{emit:w}){const d=p,g=w,{accessToken:f}=V(),u=y(!1),i=y(""),o=q({bank_name:"",account_name:"",account_number:"",account_type:"savings",branch_name:"",qr_code_url:"",is_active:!0,is_default:!1,display_order:0});U(()=>d.account,l=>{l?(o.bank_name=l.bank_name||"",o.account_name=l.account_name||"",o.account_number=l.account_number||"",o.account_type=l.account_type||"savings",o.branch_name=l.branch_name||"",o.qr_code_url=l.qr_code_url||"",o.is_active=l.is_active!==void 0?l.is_active:!0,o.is_default=l.is_default!==void 0?l.is_default:!1,o.display_order=l.display_order||0):(o.bank_name="",o.account_name="",o.account_number="",o.account_type="savings",o.branch_name="",o.qr_code_url="",o.is_active=!0,o.is_default=!1,o.display_order=0),i.value=""},{immediate:!0});const h=async()=>{u.value=!0,i.value="";try{d.account?await $fetch(`/api/admin/settings/payment-methods/${d.paymentMethodId}/bank-accounts/${d.account.id}`,{method:"PUT",headers:{Authorization:`Bearer ${f.value}`},body:o}):await $fetch(`/api/admin/settings/payment-methods/${d.paymentMethodId}/bank-accounts`,{method:"POST",headers:{Authorization:`Bearer ${f.value}`},body:o}),g("saved"),g("close")}catch(l){console.error("Error saving bank account:",l),i.value=l.data?.message||"เกิดข้อผิดพลาดในการบันทึกข้อมูล"}finally{u.value=!1}};return(l,e)=>p.show?(c(),m("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:e[11]||(e[11]=_(s=>l.$emit("close"),["self"]))},[t("div",B,[t("div",C,[t("h2",S,v(p.account?"แก้ไขบัญชีธนาคาร":"เพิ่มบัญชีธนาคาร"),1),t("button",{onClick:e[0]||(e[0]=s=>l.$emit("close")),class:"text-gray-400 hover:text-gray-600"},[...e[12]||(e[12]=[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),t("form",{onSubmit:_(h,["prevent"]),class:"space-y-4"},[t("div",T,[t("div",null,[e[13]||(e[13]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[b(" ชื่อธนาคาร "),t("span",{class:"text-red-500"},"*")],-1)),r(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>n(o).bank_name=s),type:"text",required:"",placeholder:"ธนาคารกรุงเทพ",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"},null,512),[[a,n(o).bank_name]])]),t("div",null,[e[14]||(e[14]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[b(" ชื่อบัญชี "),t("span",{class:"text-red-500"},"*")],-1)),r(t("input",{"onUpdate:modelValue":e[2]||(e[2]=s=>n(o).account_name=s),type:"text",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"},null,512),[[a,n(o).account_name]])]),t("div",null,[e[15]||(e[15]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[b(" เลขบัญชี "),t("span",{class:"text-red-500"},"*")],-1)),r(t("input",{"onUpdate:modelValue":e[3]||(e[3]=s=>n(o).account_number=s),type:"text",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"},null,512),[[a,n(o).account_number]])]),t("div",null,[e[17]||(e[17]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," ประเภทบัญชี ",-1)),r(t("select",{"onUpdate:modelValue":e[4]||(e[4]=s=>n(o).account_type=s),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"},[...e[16]||(e[16]=[t("option",{value:"savings"},"ออมทรัพย์",-1),t("option",{value:"current"},"กระแสรายวัน",-1)])],512),[[M,n(o).account_type]])]),t("div",null,[e[18]||(e[18]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," สาขา ",-1)),r(t("input",{"onUpdate:modelValue":e[5]||(e[5]=s=>n(o).branch_name=s),type:"text",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"},null,512),[[a,n(o).branch_name]])]),t("div",null,[e[19]||(e[19]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," QR Code URL ",-1)),r(t("input",{"onUpdate:modelValue":e[6]||(e[6]=s=>n(o).qr_code_url=s),type:"url",placeholder:"https://example.com/qr-code.png",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"},null,512),[[a,n(o).qr_code_url]])]),t("div",null,[e[20]||(e[20]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," ลำดับการแสดงผล ",-1)),r(t("input",{"onUpdate:modelValue":e[7]||(e[7]=s=>n(o).display_order=s),type:"number",min:"0",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"},null,512),[[a,n(o).display_order,void 0,{number:!0}]])]),t("div",j,[t("label",A,[r(t("input",{"onUpdate:modelValue":e[8]||(e[8]=s=>n(o).is_active=s),type:"checkbox",class:"w-4 h-4 text-green-600 border-gray-300 rounded focus:ring-green-500"},null,512),[[k,n(o).is_active]]),e[21]||(e[21]=t("span",{class:"ml-2 text-sm text-gray-700"},"เปิดใช้งาน",-1))]),t("label",z,[r(t("input",{"onUpdate:modelValue":e[9]||(e[9]=s=>n(o).is_default=s),type:"checkbox",class:"w-4 h-4 text-green-600 border-gray-300 rounded focus:ring-green-500"},null,512),[[k,n(o).is_default]]),e[22]||(e[22]=t("span",{class:"ml-2 text-sm text-gray-700"},"ตั้งเป็นค่าเริ่มต้น",-1))])])]),n(i)?(c(),m("div",E,v(n(i)),1)):x("",!0),t("div",I,[t("button",{type:"button",onClick:e[10]||(e[10]=s=>l.$emit("close")),class:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-100"}," ยกเลิก "),t("button",{type:"submit",disabled:n(u),class:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed"},[n(u)?(c(),m("span",N,"กำลังบันทึก...")):(c(),m("span",D,"บันทึก"))],8,L)])],32)])])):x("",!0)}});export{R as _};
