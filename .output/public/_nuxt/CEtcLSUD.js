import{d as M,l as T,r as l,o as j,c as a,b as e,k as $,v as z,e as n,t as c,F as y,i as _,j as S,a as t,s as f}from"./B_rLn4hw.js";import{_ as A}from"./BvxmftaX.js";const E={class:"bg-white rounded-lg shadow"},F={key:0,class:"p-8 text-center"},H={key:1,class:"p-4 bg-red-50 border border-red-200 text-red-700 rounded m-6"},L={key:2},N={key:0,class:"p-8 text-center text-gray-500"},V={key:1,class:"min-w-full divide-y divide-gray-200"},D={class:"bg-white divide-y divide-gray-200"},R={class:"px-6 py-4 whitespace-nowrap"},q={class:"text-sm font-medium text-gray-900"},G={class:"px-6 py-4 whitespace-nowrap"},I={class:"text-sm text-gray-500"},J={class:"px-6 py-4"},K={class:"text-sm text-gray-900 max-w-xs truncate"},O={class:"px-6 py-4"},P={class:"flex flex-wrap gap-1"},Q={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},U={class:"flex items-center justify-end space-x-2"},W=["onClick"],X=["onClick"],te=M({__name:"TemplatesTab",setup(Y){const k=S(),{accessToken:w}=T(),x=l([]),m=l(!1),u=l(""),i=l(!1),d=l(null),h=l("view"),v=async()=>{m.value=!0,u.value="";try{const s=await $fetch(`${k.public.apiBase}/admin/settings/email/templates`,{headers:{Authorization:`Bearer ${w.value}`}});s.success&&(x.value=s.data)}catch(s){console.error("Error loading templates:",s),u.value=s.data?.message||"เกิดข้อผิดพลาดในการโหลดข้อมูล"}finally{m.value=!1}},b=s=>{d.value={...s},h.value="view",i.value=!0},C=s=>{d.value={...s},h.value="edit",i.value=!0},g=()=>{i.value=!1,d.value=null},B=()=>{g(),v()};return j(()=>{v()}),(s,o)=>(t(),a("div",E,[o[4]||(o[4]=e("div",{class:"p-6 border-b border-gray-200"},[e("h2",{class:"text-2xl font-bold mb-2"},"เทมเพลตอีเมล"),e("p",{class:"text-gray-600"},"จัดการเทมเพลตอีเมลสำหรับการส่งอีเมลต่างๆ")],-1)),n(m)?(t(),a("div",F,[...o[0]||(o[0]=[e("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-green-600"},null,-1),e("p",{class:"mt-2 text-gray-600"},"กำลังโหลด...",-1)])])):n(u)?(t(),a("div",H,c(n(u)),1)):(t(),a("div",L,[n(x).length===0?(t(),a("div",N," ไม่พบเทมเพลต ")):(t(),a("table",V,[o[3]||(o[3]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"ชื่อ"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"รหัส"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"หัวเรื่อง"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"ตัวแปร"),e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"จัดการ")])],-1)),e("tbody",D,[(t(!0),a(y,null,_(n(x),r=>(t(),a("tr",{key:r.id,class:"hover:bg-gray-50"},[e("td",R,[e("div",q,c(r.name),1)]),e("td",G,[e("div",I,c(r.code),1)]),e("td",J,[e("div",K,c(r.subject),1)]),e("td",O,[e("div",P,[(t(!0),a(y,null,_(r.variables,p=>(t(),a("span",{key:p,class:"px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded"},c(p),1))),128))])]),e("td",Q,[e("div",U,[e("button",{onClick:f(p=>b(r),["stop"]),class:"text-blue-600 hover:text-blue-900",title:"ดู"},[...o[1]||(o[1]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)])],8,W),e("button",{onClick:f(p=>C(r),["stop"]),class:"text-green-600 hover:text-green-900",title:"แก้ไข"},[...o[2]||(o[2]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])],8,X)])])]))),128))])]))])),n(i)&&n(d)?(t(),$(A,{key:3,show:n(i),template:n(d),mode:n(h),onClose:g,onSaved:B},null,8,["show","template","mode"])):z("",!0)]))}});export{te as _};
