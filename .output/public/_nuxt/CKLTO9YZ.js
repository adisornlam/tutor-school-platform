import{_ as T}from"./4ad8EU3U.js";import{_ as E}from"./DHYVF31p.js";import{d as z,l as D,M as L,r as i,o as S,c as n,b as e,f as b,e as r,t as l,F as N,i as V,a,v as C,n as M}from"./B_rLn4hw.js";import"./Bi4Vf-dQ.js";import"./7LqKDiQw.js";import"./CSRImk1W.js";import"./BvHsonMJ.js";import"./BsAiViFK.js";import"./C3Q-pcvS.js";import"./CQrG7wCx.js";const H={class:"flex items-center justify-between mb-6"},P={class:"bg-white rounded-lg shadow overflow-hidden"},F={key:0,class:"p-8 text-center"},G={key:1,class:"p-4 bg-red-50 border border-red-200 text-red-700 rounded"},q={key:2,class:"p-8 text-center text-gray-500"},I={key:3,class:"min-w-full divide-y divide-gray-200"},J={class:"bg-white divide-y divide-gray-200"},K={class:"px-6 py-4 whitespace-nowrap"},O={class:"text-sm font-medium text-gray-900"},Q={class:"px-6 py-4 whitespace-nowrap"},R={class:"text-sm font-medium text-gray-900"},U={key:0,class:"text-sm text-gray-500"},W={class:"px-6 py-4 whitespace-nowrap"},X={class:"px-6 py-4 whitespace-nowrap"},Y={class:"px-6 py-4 whitespace-nowrap"},Z={key:0,class:"px-2 py-1 text-xs font-medium bg-yellow-100 text-yellow-800 rounded"},ee={key:1,class:"text-gray-400"},te={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},se={class:"flex items-center justify-end space-x-2"},oe=["onClick"],ne=["onClick","title"],ae={key:0,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},re={key:1,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ie=["onClick"],fe=z({__name:"index",setup(le){const{accessToken:u}=D(),{confirm:v}=L(),x=i(!1),d=i(null),m=i([]),y=i(!1),g=i(!1),f=i(null),h=i(null),p=async()=>{try{x.value=!0,d.value=null;const o=await $fetch("/api/admin/settings/payment-methods",{headers:{Authorization:`Bearer ${u.value}`}});o.success?m.value=o.data:d.value="ไม่สามารถโหลดวิธีการชำระเงินได้"}catch(o){console.error("Error loading payment methods:",o),d.value=o.data?.message||"เกิดข้อผิดพลาดในการโหลดวิธีการชำระเงิน"}finally{x.value=!1}},$=async o=>{const t=o.is_active?"ปิดใช้งาน":"เปิดใช้งาน";if(await v({title:`${t}วิธีชำระเงิน`,message:`คุณต้องการ${t} "${o.name}" หรือไม่?`,confirmText:t,cancelText:"ยกเลิก"}))try{await $fetch(`/api/admin/settings/payment-methods/${o.id}/status`,{method:"PATCH",headers:{Authorization:`Bearer ${u.value}`},body:{is_active:!o.is_active}}),await p()}catch(c){console.error("Error toggling status:",c),alert(c.data?.message||"เกิดข้อผิดพลาดในการเปลี่ยนสถานะ")}},B=async o=>{if(await v({title:"ลบวิธีชำระเงิน",message:`คุณต้องการลบ "${o.name}" หรือไม่? การกระทำนี้ไม่สามารถย้อนกลับได้`,confirmText:"ลบ",cancelText:"ยกเลิก",variant:"danger"}))try{await $fetch(`/api/admin/settings/payment-methods/${o.id}`,{method:"DELETE",headers:{Authorization:`Bearer ${u.value}`}}),await p()}catch(s){console.error("Error deleting payment method:",s),alert(s.data?.message||"เกิดข้อผิดพลาดในการลบ")}},j=o=>{h.value=o,g.value=!0},w=()=>{h.value=null,g.value=!1},_=()=>{f.value=null,y.value=!1},k=()=>{_(),w(),p()},A=o=>({bank_transfer:"โอนเงินผ่านธนาคาร",payment_gateway:"Payment Gateway",other:"อื่นๆ"})[o]||o;return S(()=>{p()}),(o,t)=>(a(),n("div",null,[e("div",H,[t[2]||(t[2]=e("div",null,[e("h1",{class:"text-3xl font-bold"},"จัดการวิธีการชำระเงิน"),e("p",{class:"mt-2 text-gray-600"},"เพิ่ม แก้ไข และจัดการวิธีการชำระเงิน")],-1)),e("button",{onClick:t[0]||(t[0]=s=>y.value=!0),class:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center space-x-2"},[...t[1]||(t[1]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),e("span",null,"เพิ่มวิธีชำระเงิน",-1)])])]),e("div",P,[r(x)?(a(),n("div",F,[...t[3]||(t[3]=[e("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-green-600"},null,-1),e("p",{class:"mt-2 text-gray-600"},"กำลังโหลด...",-1)])])):r(d)?(a(),n("div",G,l(r(d)),1)):r(m).length===0?(a(),n("div",q," ไม่พบวิธีชำระเงิน ")):(a(),n("table",I,[t[8]||(t[8]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"รหัส"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"ชื่อ"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"ประเภท"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"สถานะ"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"ค่าเริ่มต้น"),e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"จัดการ")])],-1)),e("tbody",J,[(a(!0),n(N,null,V(r(m),s=>(a(),n("tr",{key:s.id,class:"hover:bg-gray-50"},[e("td",K,[e("div",O,l(s.code),1)]),e("td",Q,[e("div",R,l(s.name),1),s.description?(a(),n("div",U,l(s.description),1)):C("",!0)]),e("td",W,[e("span",{class:M(["px-2 py-1 text-xs font-medium rounded",{"bg-blue-100 text-blue-800":s.type==="bank_transfer","bg-purple-100 text-purple-800":s.type==="payment_gateway","bg-gray-100 text-gray-800":s.type==="other"}])},l(A(s.type)),3)]),e("td",X,[e("span",{class:M(["px-2 py-1 text-xs font-medium rounded",s.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"])},l(s.is_active?"ใช้งาน":"ปิดใช้งาน"),3)]),e("td",Y,[s.is_default?(a(),n("span",Z," ค่าเริ่มต้น ")):(a(),n("span",ee,"-"))]),e("td",te,[e("div",se,[e("button",{onClick:c=>j(s),class:"text-green-600 hover:text-green-900",title:"รายละเอียด/จัดการ"},[...t[4]||(t[4]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)])],8,oe),e("button",{onClick:c=>$(s),class:"text-blue-600 hover:text-blue-900",title:s.is_active?"ปิดใช้งาน":"เปิดใช้งาน"},[s.is_active?(a(),n("svg",ae,[...t[5]||(t[5]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"},null,-1)])])):(a(),n("svg",re,[...t[6]||(t[6]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])]))],8,ne),s.is_default?C("",!0):(a(),n("button",{key:0,onClick:c=>B(s),class:"text-red-600 hover:text-red-900",title:"ลบ"},[...t[7]||(t[7]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,ie))])])]))),128))])]))]),b(T,{show:r(y),method:r(f),onClose:_,onSaved:k},null,8,["show","method"]),b(E,{show:r(g),method:r(h),onClose:w,onSaved:k},null,8,["show","method"])]))}});export{fe as default};
