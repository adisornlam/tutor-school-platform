import{_ as S}from"./BlVozWiI.js";import{d as V,m as E,p as I,l as R,B as y,r as c,o as z,c as d,b as t,v as r,e as s,t as o,n as m,f as A,w as O,g as _,j as P,a}from"./B_rLn4hw.js";import{f as F}from"./BALXvQ8s.js";import{t as U}from"./CiM0_A9B.js";const q={class:"flex items-center justify-between mb-6"},G={class:"flex items-center space-x-4"},J={class:"flex items-center space-x-3"},K={key:0,class:"text-center py-12"},Q={key:1,class:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg"},W={key:2,class:"space-y-6"},X={class:"bg-white rounded-lg shadow p-6"},Y={class:"flex items-center justify-between mb-4"},Z={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},tt={class:"text-gray-900"},et={class:"text-gray-900"},st={class:"bg-white rounded-lg shadow p-6"},nt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ot={class:"text-gray-900"},lt={class:"text-gray-900"},dt={class:"text-gray-900"},at={class:"text-gray-900"},rt={class:"bg-white rounded-lg shadow p-6"},it={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},mt={class:"md:col-span-2"},ut={class:"text-lg font-medium"},pt={class:"text-gray-900"},gt={class:"text-lg font-medium text-gray-900"},ct={class:"text-gray-900"},bt={class:"text-gray-900"},xt={key:0,class:"md:col-span-2"},yt=["innerHTML"],_t={key:0,class:"bg-white rounded-lg shadow p-6"},vt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ft={class:"text-gray-900"},kt={class:"text-gray-900"},ht={key:0,class:"md:col-span-2"},wt={class:"text-gray-900"},Nt={key:1},Ct={class:"text-gray-900"},Bt={key:2},$t={class:"text-gray-900"},Ht={key:1,class:"bg-white rounded-lg shadow p-6"},Tt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Mt={class:"text-gray-900"},Dt={class:"text-gray-900"},Lt={class:"md:col-span-2"},jt={class:"text-gray-900"},St={key:0},Vt={class:"text-gray-900"},Et={key:0},It={key:1},Rt={key:2},zt={key:3},At={class:"text-gray-900"},Ot={key:0,class:"ml-2 px-2 py-1 bg-green-100 text-green-800 rounded text-xs"},Pt={key:2,class:"bg-white rounded-lg shadow p-6"},Ft={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ut={class:"text-lg font-medium text-gray-900"},qt={key:0},Gt={class:"text-gray-900"},Jt={key:1},Kt={class:"text-gray-900"},Qt={key:2},Wt={class:"text-gray-900"},Xt={key:3},Yt={class:"text-gray-900"},oe=V({__name:"index",setup(Zt){const v=E(),f=I(),k=P(),{accessToken:h,user:u}=R(),b=y(()=>parseInt(v.params.id)),p=c(!0),i=c(""),n=c(null),w=y(()=>{if(!u.value||!u.value.roles)return!1;const l=["system_admin","owner","admin","branch_admin"];return u.value.roles.some(e=>l.includes(e))}),N=async()=>{p.value=!0,i.value="";try{const l=await $fetch(`${k.public.apiBase}/admin/enrollments/${b.value}`,{headers:{Authorization:`Bearer ${h.value}`}});l.success&&(n.value=l.data)}catch(l){console.error("Error loading enrollment detail:",l),i.value=l.data?.message||"เกิดข้อผิดพลาดในการโหลดข้อมูล"}finally{p.value=!1}},C=l=>({pending:"รอการยืนยัน",active:"กำลังเรียน",completed:"เรียนจบ",cancelled:"ยกเลิก"})[l]||l,B=l=>({pending:"bg-yellow-100 text-yellow-800",active:"bg-green-100 text-green-800",completed:"bg-blue-100 text-blue-800",cancelled:"bg-red-100 text-red-800"})[l]||"bg-gray-100 text-gray-800",$=l=>({live_online:"Live Online",vod:"VOD",hybrid:"Hybrid"})[l]||l,H=l=>({live_online:"bg-blue-100 text-blue-800",vod:"bg-purple-100 text-purple-800",hybrid:"bg-indigo-100 text-indigo-800"})[l]||"bg-gray-100 text-gray-800",T=l=>({beginner:"เริ่มต้น",intermediate:"กลาง",advanced:"สูง"})[l]||l,M=l=>({pending:"รอการชำระ",paid:"ชำระแล้ว",failed:"ชำระไม่สำเร็จ",refunded:"คืนเงินแล้ว"})[l]||l,D=l=>({pending:"bg-yellow-100 text-yellow-800",paid:"bg-green-100 text-green-800",failed:"bg-red-100 text-red-800",refunded:"bg-gray-100 text-gray-800"})[l]||"bg-gray-100 text-gray-800",x=l=>new Intl.NumberFormat("th-TH",{style:"currency",currency:"THB"}).format(l),g=l=>F(new Date(l),"dd MMM yyyy HH:mm",{locale:U});return z(()=>{N()}),(l,e)=>{const L=S;return a(),d("div",null,[t("div",q,[t("div",G,[t("button",{onClick:e[0]||(e[0]=j=>l.$router.back()),class:"p-2 hover:bg-gray-100 rounded-lg"},[...e[2]||(e[2]=[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1)])]),e[3]||(e[3]=t("h1",{class:"text-3xl font-bold"},"รายละเอียดการลงทะเบียน",-1))]),t("div",J,[s(w)?(a(),d("button",{key:0,onClick:e[1]||(e[1]=j=>s(f).push(`/admin/enrollments/${s(b)}/edit`)),class:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center space-x-2"},[...e[4]||(e[4]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),t("span",null,"แก้ไข",-1)])])):r("",!0)])]),s(p)?(a(),d("div",K,[...e[5]||(e[5]=[t("div",{class:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"},null,-1),t("p",{class:"mt-4 text-gray-600"},"กำลังโหลดข้อมูล...",-1)])])):s(i)?(a(),d("div",Q,o(s(i)),1)):s(n)?(a(),d("div",W,[t("div",X,[t("div",Y,[e[6]||(e[6]=t("h2",{class:"text-xl font-semibold"},"สถานะการลงทะเบียน",-1)),t("span",{class:m(["px-3 py-1 text-sm font-medium rounded",B(s(n).enrollment.status)])},o(C(s(n).enrollment.status)),3)]),t("div",Z,[t("div",null,[e[7]||(e[7]=t("label",{class:"block text-sm font-medium text-gray-500 mb-1"},"ประเภทการเรียน",-1)),t("span",{class:m(["px-2 py-1 text-xs font-medium rounded",s(n).enrollment.enrollment_type==="online"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"])},o(s(n).enrollment.enrollment_type==="online"?"เรียนออนไลน์":"เรียนสด"),3)]),t("div",null,[e[8]||(e[8]=t("label",{class:"block text-sm font-medium text-gray-500 mb-1"},"วันที่ลงทะเบียน",-1)),t("p",tt,o(g(s(n).enrollment.enrollment_date||s(n).enrollment.created_at)),1)]),t("div",null,[e[9]||(e[9]=t("label",{class:"block text-sm font-medium text-gray-500 mb-1"},"อัปเดตล่าสุด",-1)),t("p",et,o(g(s(n).enrollment.updated_at)),1)])])]),t("div",st,[e[14]||(e[14]=t("h2",{class:"text-xl font-semibold mb-4"},"ข้อมูลนักเรียน",-1)),t("div",nt,[t("div",null,[e[10]||(e[10]=t("label",{class:"block text-sm font-medium text-gray-500 mb-1"},"ชื่อ-นามสกุล",-1)),t("p",ot,o(s(n).student.first_name)+" "+o(s(n).student.last_name),1)]),t("div",null,[e[11]||(e[11]=t("label",{class:"block text-sm font-medium text-gray-500 mb-1"},"Username",-1)),t("p",lt,"@"+o(s(n).student.username),1)]),t("div",null,[e[12]||(e[12]=t("label",{class:"block text-sm font-medium text-gray-500 mb-1"},"อีเมล",-1)),t("p",dt,o(s(n).student.email||"-"),1)]),t("div",null,[e[13]||(e[13]=t("label",{class:"block text-sm font-medium text-gray-500 mb-1"},"เบอร์โทรศัพท์",-1)),t("p",at,o(s(n).student.phone||"-"),1)])])]),t("div",rt,[e[22]||(e[22]=t("h2",{class:"text-xl font-semibold mb-4"},"ข้อมูลคอร์ส",-1)),t("div",it,[t("div",mt,[e[15]||(e[15]=t("label",{class:"block text-sm font-medium text-gray-500 mb-1"},"ชื่อคอร์ส",-1)),A(L,{to:`/admin/courses/${s(n).course.id}`,class:"text-green-600 hover:text-green-700"},{default:O(()=>[t("p",ut,o(s(n).course.title),1)]),_:1},8,["to"])]),t("div",null,[e[16]||(e[16]=t("label",{class:"block text-sm font-medium text-gray-500 mb-1"},"รหัสคอร์ส",-1)),t("p",pt,o(s(n).course.code||"-"),1)]),t("div",null,[e[17]||(e[17]=t("label",{class:"block text-sm font-medium text-gray-500 mb-1"},"ประเภท",-1)),t("span",{class:m(["px-2 py-1 text-xs font-medium rounded",H(s(n).course.type)])},o($(s(n).course.type)),3)]),t("div",null,[e[18]||(e[18]=t("label",{class:"block text-sm font-medium text-gray-500 mb-1"},"ราคา",-1)),t("p",gt,o(x(s(n).course.price)),1)]),t("div",null,[e[19]||(e[19]=t("label",{class:"block text-sm font-medium text-gray-500 mb-1"},"ระยะเวลา",-1)),t("p",ct,o(s(n).course.duration_hours?`${s(n).course.duration_hours} ชั่วโมง`:"-"),1)]),t("div",null,[e[20]||(e[20]=t("label",{class:"block text-sm font-medium text-gray-500 mb-1"},"ระดับ",-1)),t("p",bt,o(s(n).course.level?T(s(n).course.level):"-"),1)]),s(n).course.description?(a(),d("div",xt,[e[21]||(e[21]=t("label",{class:"block text-sm font-medium text-gray-500 mb-1"},"คำอธิบาย",-1)),t("div",{class:"text-gray-900 prose max-w-none",innerHTML:s(n).course.description},null,8,yt)])):r("",!0)])]),s(n).enrollment.enrollment_type==="onsite"&&s(n).branch?(a(),d("div",_t,[e[28]||(e[28]=t("h2",{class:"text-xl font-semibold mb-4"},"ข้อมูลสาขา",-1)),t("div",vt,[t("div",null,[e[23]||(e[23]=t("label",{class:"block text-sm font-medium text-gray-500 mb-1"},"ชื่อสาขา",-1)),t("p",ft,o(s(n).branch.name),1)]),t("div",null,[e[24]||(e[24]=t("label",{class:"block text-sm font-medium text-gray-500 mb-1"},"รหัสสาขา",-1)),t("p",kt,o(s(n).branch.code||"-"),1)]),s(n).branch.address?(a(),d("div",ht,[e[25]||(e[25]=t("label",{class:"block text-sm font-medium text-gray-500 mb-1"},"ที่อยู่",-1)),t("p",wt,o(s(n).branch.address),1)])):r("",!0),s(n).branch.phone?(a(),d("div",Nt,[e[26]||(e[26]=t("label",{class:"block text-sm font-medium text-gray-500 mb-1"},"เบอร์โทรศัพท์",-1)),t("p",Ct,o(s(n).branch.phone),1)])):r("",!0),s(n).branch.email?(a(),d("div",Bt,[e[27]||(e[27]=t("label",{class:"block text-sm font-medium text-gray-500 mb-1"},"อีเมล",-1)),t("p",$t,o(s(n).branch.email),1)])):r("",!0)])])):r("",!0),s(n).enrollment.enrollment_type==="online"&&s(n).shipping_address?(a(),d("div",Ht,[e[33]||(e[33]=t("h2",{class:"text-xl font-semibold mb-4"},"ที่อยู่จัดส่ง",-1)),t("div",Tt,[t("div",null,[e[29]||(e[29]=t("label",{class:"block text-sm font-medium text-gray-500 mb-1"},"ผู้รับ",-1)),t("p",Mt,o(s(n).shipping_address.recipient_name),1)]),t("div",null,[e[30]||(e[30]=t("label",{class:"block text-sm font-medium text-gray-500 mb-1"},"เบอร์โทรศัพท์",-1)),t("p",Dt,o(s(n).shipping_address.phone),1)]),t("div",Lt,[e[31]||(e[31]=t("label",{class:"block text-sm font-medium text-gray-500 mb-1"},"ที่อยู่",-1)),t("p",jt,[_(o(s(n).shipping_address.address_line1)+" ",1),s(n).shipping_address.address_line2?(a(),d("span",St,", "+o(s(n).shipping_address.address_line2),1)):r("",!0)]),t("p",Vt,[s(n).shipping_address.subdistrict?(a(),d("span",Et,o(s(n).shipping_address.subdistrict),1)):r("",!0),s(n).shipping_address.district?(a(),d("span",It,"อ."+o(s(n).shipping_address.district),1)):r("",!0),s(n).shipping_address.province?(a(),d("span",Rt,"จ."+o(s(n).shipping_address.province),1)):r("",!0),s(n).shipping_address.postal_code?(a(),d("span",zt,o(s(n).shipping_address.postal_code),1)):r("",!0)])]),t("div",null,[e[32]||(e[32]=t("label",{class:"block text-sm font-medium text-gray-500 mb-1"},"ประเภทที่อยู่",-1)),t("p",At,[_(o(s(n).shipping_address.address_type==="home"?"บ้าน":s(n).shipping_address.address_type==="work"?"ที่ทำงาน":"อื่นๆ")+" ",1),s(n).shipping_address.is_default?(a(),d("span",Ot,"หลัก")):r("",!0)])])])])):r("",!0),s(n).payment?(a(),d("div",Pt,[e[40]||(e[40]=t("h2",{class:"text-xl font-semibold mb-4"},"ข้อมูลการชำระเงิน",-1)),t("div",Ft,[t("div",null,[e[34]||(e[34]=t("label",{class:"block text-sm font-medium text-gray-500 mb-1"},"จำนวนเงิน",-1)),t("p",Ut,o(x(s(n).payment.amount)),1)]),t("div",null,[e[35]||(e[35]=t("label",{class:"block text-sm font-medium text-gray-500 mb-1"},"สถานะ",-1)),t("span",{class:m(["px-2 py-1 text-xs font-medium rounded",D(s(n).payment.status)])},o(M(s(n).payment.status)),3)]),s(n).payment.payment_method?(a(),d("div",qt,[e[36]||(e[36]=t("label",{class:"block text-sm font-medium text-gray-500 mb-1"},"วิธีการชำระ",-1)),t("p",Gt,o(s(n).payment.payment_method),1)])):r("",!0),s(n).payment.transaction_id?(a(),d("div",Jt,[e[37]||(e[37]=t("label",{class:"block text-sm font-medium text-gray-500 mb-1"},"Transaction ID",-1)),t("p",Kt,o(s(n).payment.transaction_id),1)])):r("",!0),s(n).payment.invoice_number?(a(),d("div",Qt,[e[38]||(e[38]=t("label",{class:"block text-sm font-medium text-gray-500 mb-1"},"เลขที่ใบแจ้งหนี้",-1)),t("p",Wt,o(s(n).payment.invoice_number),1)])):r("",!0),s(n).payment.paid_at?(a(),d("div",Xt,[e[39]||(e[39]=t("label",{class:"block text-sm font-medium text-gray-500 mb-1"},"วันที่ชำระ",-1)),t("p",Yt,o(g(s(n).payment.paid_at)),1)])):r("",!0)])])):r("",!0)])):r("",!0)])}}});export{oe as default};
